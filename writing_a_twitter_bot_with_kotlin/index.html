<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta data-react-helmet="true" property="og:image:height" content="0.666077738515901"/><meta data-react-helmet="true" property="og:image:width" content="1"/><meta data-react-helmet="true" name="twitter:creator" content="@iurysza"/><meta data-react-helmet="true" name="twitter:site" content="@iurysza"/><meta data-react-helmet="true" name="twitter:data2" content="kotlin"/><meta data-react-helmet="true" name="twitter:label2" content="Filed under"/><meta data-react-helmet="true" name="twitter:data1" content="Iury Souza"/><meta data-react-helmet="true" name="twitter:label1" content="Written by"/><meta data-react-helmet="true" name="twitter:image" content="https://iurysza.github.io/thoughtbox/static/e7bf07c8347aeee98c6cc599e44799e1/bf098/twitter-telegram-header.jpg"/><meta data-react-helmet="true" name="twitter:url" content="https://iurysza.github.io/thoughtbox/writing_a_twitter_bot_with_kotlin/"/><meta data-react-helmet="true" name="twitter:description" content="How to use kotlin to build a bot to send Twitter videos to you via Telegram."/><meta data-react-helmet="true" name="twitter:title" content="A Twitter-Telegram bot in Kotlin"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" property="article:author" content="https://www.linkedin.com/in/iurysouza/"/><meta data-react-helmet="true" property="article:publisher" content="https://www.linkedin.com/in/iurysouza/"/><meta data-react-helmet="true" property="article:tag" content="kotlin"/><meta data-react-helmet="true" property="article:published_time" content="2020-07-09T11:53:37.121Z"/><meta data-react-helmet="true" property="og:image" content="https://iurysza.github.io/thoughtbox/static/e7bf07c8347aeee98c6cc599e44799e1/bf098/twitter-telegram-header.jpg"/><meta data-react-helmet="true" property="og:url" content="https://iurysza.github.io/thoughtbox/writing_a_twitter_bot_with_kotlin/"/><meta data-react-helmet="true" property="og:description" content="How to use kotlin to build a bot to send Twitter videos to you via Telegram."/><meta data-react-helmet="true" property="og:title" content="A Twitter-Telegram bot in Kotlin"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:site_name" content="Thought Box"/><meta data-react-helmet="true" name="description" content="How to use kotlin to build a bot to send Twitter videos to you via Telegram."/><meta name="generator" content="Gatsby 4.14.1"/><link rel="sitemap" type="application/xml" href="/sitemap/sitemap-index.xml"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="canonical" href="https://gatsby-casper.netlify.com/writing_a_twitter_bot_with_kotlin/" data-baseprotocol="https:" data-basehost="gatsby-casper.netlify.com"/><title data-react-helmet="true">A Twitter-Telegram bot in Kotlin</title><link data-react-helmet="true" rel="icon" href="/static/favicon-a5132378ea3d797ab6a0a6ca50d1bedf.ico" type="image/x-icon"/><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><script>
  window.excludeGAPaths=[/^(?:\/preview\/(?:(?!(?:\/|^)\.).)*?)$/];
  function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='UA-XXXX-Y',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
  if(!(parseInt(navigator.doNotTrack) === 1 || parseInt(window.doNotTrack) === 1 || parseInt(navigator.msDoNotTrack) === 1 || navigator.doNotTrack === "yes")) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-XXXX-Y', 'auto', {"sampleRate":100,"siteSpeedSampleRate":10});
      ga('set', 'anonymizeIp', true);
      
      
      
      
      }</script><link rel="preconnect" href="https://www.googletagmanager.com"/><link rel="dns-prefetch" href="https://www.googletagmanager.com"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-QYESMD3H23"></script><script>
      
      
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){window.dataLayer && window.dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-QYESMD3H23', {"send_page_view":false});
      }
      </script></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="post-template"><style data-emotion="css-global 17by24i">html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font:inherit;font-size:100%;vertical-align:baseline;}body{line-height:1;}ol,ul{list-style:none;}blockquote,q{quotes:none;}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none;}table{border-spacing:0;border-collapse:collapse;}img{max-width:100%;}html{box-sizing:border-box;font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;}*,*:before,*:after{box-sizing:inherit;}a{background-color:transparent;}a:active,a:hover{outline:0;}b,strong{font-weight:bold;}i,em,dfn{font-style:italic;}h1{margin:0.67em 0;font-size:2em;}small{font-size:80%;}sub,sup{position:relative;font-size:75%;line-height:0;vertical-align:baseline;}sup{top:-0.5em;}sub{bottom:-0.25em;}img{border:0;}svg:not(:root){overflow:hidden;}mark{background-color:#fdffb6;}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em;}button,input,optgroup,select,textarea{margin:0;color:inherit;font:inherit;}button{overflow:visible;border:none;}button,select{text-transform:none;}button,html input[type='button'],input[type='reset'],input[type='submit']{cursor:pointer;-webkit-appearance:button;}button[disabled],html input[disabled]{cursor:default;}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0;}input{line-height:normal;}input:focus{outline:none;}input[type='checkbox'],input[type='radio']{box-sizing:border-box;padding:0;}input[type='number']::-webkit-inner-spin-button,input[type='number']::-webkit-outer-spin-button{height:auto;}input[type='search']{box-sizing:content-box;-webkit-appearance:textfield;}input[type='search']::-webkit-search-cancel-button,input[type='search']::-webkit-search-decoration{-webkit-appearance:none;}legend{padding:0;border:0;}textarea{overflow:auto;}table{border-spacing:0;border-collapse:collapse;}td,th{padding:0;}html{overflow-x:hidden;overflow-y:scroll;font-size:62.5%;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);}body{overflow-x:hidden;color:#303a3e;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;font-size:1.6rem;line-height:1.6em;font-weight:400;font-style:normal;letter-spacing:0;text-rendering:optimizeLegibility;background:#fff;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-moz-font-feature-settings:'liga' on;}::selection{text-shadow:aqua;background:#6dc3f3;}hr{position:relative;display:block;width:100%;margin:2.5em 0 3.5em;padding:0;height:1px;border:0;border-top:1px solid #e4eaed;}audio,canvas,iframe,img,svg,video{vertical-align:middle;}fieldset{margin:0;padding:0;border:0;}textarea{resize:vertical;}p,ul,ol,dl,blockquote{margin:0 0 1.5em 0;}ol,ul{padding-left:1.3em;padding-right:1.5em;}ol ol,ul ul,ul ol,ol ul{margin:0.5em 0 1em;}ul{list-style:disc;}ol{list-style:decimal;}ul,ol{max-width:100%;}li{margin:0.5em 0;padding-left:0.3em;line-height:1.6em;}dt{float:left;margin:0 20px 0 0;width:120px;color:#15171A;font-weight:500;text-align:right;}dd{margin:0 0 5px 0;text-align:left;}blockquote{margin:1.5em 0;padding:0 1.6em 0 1.6em;border-left:#e5eff5 0.5em solid;}blockquote p{margin:0.8em 0;font-size:1.2em;font-weight:300;}blockquote small{display:inline-block;margin:0.8em 0 0.8em 1.5em;font-size:0.9em;opacity:0.8;}blockquote cite{font-weight:bold;}blockquote cite a{font-weight:normal;}a{color:#26a6ed;-webkit-text-decoration:none;text-decoration:none;}a:hover{-webkit-text-decoration:underline;text-decoration:underline;}h1,h2,h3,h4,h5,h6{margin-top:0;line-height:1.15;font-weight:600;text-rendering:optimizeLegibility;}h1{margin:0 0 0.5em 0;font-size:5.5rem;font-weight:600;}@media (max-width: 500px){h1{font-size:2.2rem;}}h2{margin:1.5em 0 0.5em 0;font-size:2.2rem;}@media (max-width: 500px){h2{font-size:1.8rem;}}h3{margin:1.5em 0 0.5em 0;font-size:1.8rem;font-weight:500;}@media (max-width: 500px){h3{font-size:1.7rem;}}h4{margin:1.5em 0 0.5em 0;font-size:1.6rem;font-weight:500;}h5{margin:1.5em 0 0.5em 0;font-size:1.4rem;font-weight:500;}h6{margin:1.5em 0 0.5em 0;font-size:1.4rem;font-weight:500;}body{background:#fff;}@media (prefers-color-scheme: dark){body{color:rgba(255, 255, 255, 0.75);background:#191b1f;}img{opacity:0.9;}}</style><style data-emotion="css wv5on3">.css-wv5on3 .site-main{margin-top:64px;background:#fff;padding-bottom:4vw;}@media (prefers-color-scheme: dark){.css-wv5on3 .site-main{background:#191b1f;}}</style><style data-emotion="css 1qvd43r">.css-1qvd43r{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;}.css-1qvd43r .site-main{margin-top:64px;background:#fff;padding-bottom:4vw;}@media (prefers-color-scheme: dark){.css-1qvd43r .site-main{background:#191b1f;}}</style><div class="css-1qvd43r esvym2d0"><header class="site-header"><style data-emotion="css 1qxgdzi">.css-1qxgdzi{position:relative;padding:0 5vw;position:fixed;top:0;right:0;left:0;z-index:1000;background:#0a0b0c;}@media (max-width: 700px){.css-1qxgdzi{padding-right:0;padding-left:0;}}</style><div class="css-1qxgdzi"><style data-emotion="css y521qa">.css-y521qa{margin:0 auto;max-width:1040px;width:100%;}</style><div class="css-y521qa"><style data-emotion="css lcmrfl">.css-lcmrfl{position:relative;z-index:100;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;overflow-y:hidden;height:64px;font-size:1.3rem;}</style><nav class="css-lcmrfl"><style data-emotion="css crtwut">.css-crtwut{-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;overflow-x:auto;overflow-y:hidden;-webkit-overflow-scrolling:touch;margin-right:10px;padding:10px 0 80px;font-weight:500;letter-spacing:0.2px;text-transform:uppercase;white-space:nowrap;-ms-overflow-scrolling:touch;}@media (max-width: 700px){.css-crtwut{margin-right:0;padding-left:5vw;}}</style><div class="site-nav-left css-crtwut e1sju8vj5"><style data-emotion="css 1xdepn">.css-1xdepn{position:relative;-webkit-align-self:flex-start;-ms-flex-item-align:flex-start;align-self:flex-start;}</style><div class="css-1xdepn e1sju8vj4"><style data-emotion="css d1pqrt">.css-d1pqrt{position:absolute;z-index:1000;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:0 0 0 -12px;padding:0;list-style:none;-webkit-transition:all 1s cubic-bezier(0.19, 1, 0.22, 1);transition:all 1s cubic-bezier(0.19, 1, 0.22, 1);}.css-d1pqrt li{display:block;margin:0;padding:0;}.css-d1pqrt li a{position:relative;display:block;padding:12px 12px;color:#fff;opacity:0.8;-webkit-transition:opacity 0.35s ease-in-out;transition:opacity 0.35s ease-in-out;}.css-d1pqrt li a:hover{-webkit-text-decoration:none;text-decoration:none;opacity:1;}.css-d1pqrt li a:before{content:'';position:absolute;right:100%;bottom:8px;left:12px;height:1px;background:#fff;opacity:0.25;-webkit-transition:all 0.35s ease-in-out;transition:all 0.35s ease-in-out;}.css-d1pqrt li a:hover:before{right:12px;opacity:0.5;}.css-d1pqrt .nav-current{opacity:1;}</style><ul role="menu" class="css-d1pqrt"><li role="menuitem"><a href="/">Home</a></li><li role="menuitem"><a href="/speaking">Speaking</a></li><li role="menuitem"><a href="/about">About Me</a></li></ul><style data-emotion="css 1wu52sc">.css-1wu52sc{visibility:hidden;position:absolute;top:9px;color:#fff;font-size:1.7rem;font-weight:400;text-transform:none;opacity:0;-webkit-transition:all 1s cubic-bezier(0.19, 1, 0.22, 1);transition:all 1s cubic-bezier(0.19, 1, 0.22, 1);-webkit-transform:translateY(175%);-moz-transform:translateY(175%);-ms-transform:translateY(175%);transform:translateY(175%);}.css-1wu52sc .dash{left:-25px;}.css-1wu52sc .dash:before{content:'– ';opacity:0.5;}</style><span class="nav-post-title css-1wu52sc e1sju8vj0">A Twitter-Telegram bot in Kotlin</span></div></div><style data-emotion="css 1p9q30u">.css-1p9q30u{-webkit-flex:0 1 auto;-ms-flex:0 1 auto;flex:0 1 auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:end;-ms-flex-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;padding:10px 0;height:64px;}@media (max-width: 700px){.css-1p9q30u{display:none;}}</style><div class="css-1p9q30u e1sju8vj3"><style data-emotion="css 1z0rm8f">.css-1z0rm8f{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><div class="css-1z0rm8f e1sju8vj2"><style data-emotion="css uoy7tg">.css-uoy7tg{display:inline-block;margin:0;padding:10px;opacity:0.8;}.css-uoy7tg:hover{opacity:1;}.css-uoy7tg svg{height:1.8rem;fill:#fff;}.css-uoy7tg svg{height:1.6rem;}</style><a class="social-link-fb css-uoy7tg" href="https://www.linkedin.com/in/iurysouza/" target="_blank" title="LinkedIn" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 455 455"><g><path d="M246.4,204.35v-0.665c-0.136,0.223-0.324,0.446-0.442,0.665H246.4z"></path><path d="M0,0v455h455V0H0z M141.522,378.002H74.016V174.906h67.506V378.002z M107.769,147.186h-0.446C84.678,147.186,70,131.585,70,112.085c0-19.928,15.107-35.087,38.211-35.087 c23.109,0,37.31,15.159,37.752,35.087C145.963,131.585,131.32,147.186,107.769,147.186z M385,378.002h-67.524V269.345 c0-27.291-9.756-45.92-34.195-45.92c-18.664,0-29.755,12.543-34.641,24.693c-1.776,4.34-2.24,10.373-2.24,16.459v113.426h-67.537 c0,0,0.905-184.043,0-203.096H246.4v28.779c8.973-13.807,24.986-33.547,60.856-33.547c44.437,0,77.744,29.02,77.744,91.398V378.002 z"></path></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg></a><style data-emotion="css 1mnl8gk">.css-1mnl8gk{display:inline-block;margin:0;padding:10px;opacity:0.8;}.css-1mnl8gk:hover{opacity:1;}.css-1mnl8gk svg{height:1.8rem;fill:#fff;}</style><a href="https://twitter.com/iurysza" title="Twitter" target="_blank" rel="noopener noreferrer" class="css-1mnl8gk"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"></path></svg></a></div></div></nav></div></div></header><style data-emotion="css 12lzzeq">.css-12lzzeq{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;position:relative;padding:0 5vw;}@media (prefers-color-scheme: dark){.css-12lzzeq{background:#191b1f;}}</style><main id="site-main" class="site-main css-12lzzeq"><div class="css-y521qa"><style data-emotion="css 1wcdnkk">.css-1wcdnkk{position:relative;z-index:50;}</style><article class="css-1wcdnkk"><style data-emotion="css 1ypjvfm">.css-1ypjvfm{position:relative;margin:0 auto;padding:70px 170px 50px;border-top-left-radius:3px;border-top-right-radius:3px;}@media (max-width: 1170px){.css-1ypjvfm{padding:60px 11vw 50px;}}@media (max-width: 800px){.css-1ypjvfm{padding-right:5vw;padding-left:5vw;}}@media (max-width: 500px){.css-1ypjvfm{padding:20px 0 35px;}}</style><header class="post-full-header css-1ypjvfm ewnyor55"><style data-emotion="css a12yu7">.css-a12yu7{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:#738a94;font-size:1.3rem;line-height:1.4em;font-weight:600;text-transform:uppercase;}</style><section class="post-full-tags css-a12yu7 ewnyor54"><a href="/tags/kotlin/">kotlin</a>,  <!-- --><a href="/tags/bot/">bot</a></section><style data-emotion="css qia1z6">.css-qia1z6{margin:0 0 0.2em;color:#0b0c0e;}@media (max-width: 500px){.css-qia1z6{margin-top:0.2em;font-size:3.3rem;}}@media (prefers-color-scheme: dark){.css-qia1z6{color:rgba(255, 255, 255, 0.9);}}</style><h1 class="post-full-title css-qia1z6 ewnyor51">A Twitter-Telegram bot in Kotlin</h1><style data-emotion="css 16sbnz0">.css-16sbnz0{margin:20px 0 0;color:var(--midgrey);font-family:Georgia,serif;font-size:2.3rem;line-height:1.4em;font-weight:300;}@media (max-width: 500px){.css-16sbnz0{font-size:1.9rem;line-height:1.5em;}}@media (prefers-color-scheme: dark){.css-16sbnz0{color:#90a2aa;}}</style><p class="post-full-custom-excerpt css-16sbnz0 ewnyor53">How to use kotlin to build a bot to send Twitter videos to you via Telegram.</p><style data-emotion="css 1pygz0x">.css-1pygz0x{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin:35px 0 0;padding-top:15px;border-top:1px solid #e4eaed;}.css-1pygz0x .post-full-byline-content{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}.css-1pygz0x .post-full-byline-content .author-list{-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;padding:0 12px 0 0;}.css-1pygz0x .post-full-byline-meta{margin:2px 0 0;color:#90a2aa;font-size:1.2rem;line-height:1.2em;letter-spacing:0.2px;text-transform:uppercase;}.css-1pygz0x .post-full-byline-meta h4{margin:0 0 3px;font-size:1.3rem;line-height:1.4em;font-weight:500;}.css-1pygz0x .post-full-byline-meta h4 a{color:#2c3036;}.css-1pygz0x .post-full-byline-meta h4 a:hover{color:#15171A;}.css-1pygz0x .post-full-byline-meta .bull{display:inline-block;margin:0 4px;opacity:0.6;}@media (prefers-color-scheme: dark){.css-1pygz0x{border-top-color:#3b4049;}.css-1pygz0x .post-full-byline-meta h4 a{color:rgba(255, 255, 255, 0.75);}.css-1pygz0x .post-full-byline-meta h4 a:hover{color:#fff;}}</style><div class="post-full-byline css-1pygz0x ewnyor52"><section class="post-full-byline-content"><style data-emotion="css 12fmpzj">.css-12fmpzj{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin:0 0 0 4px;padding:0;list-style:none;}</style><ul class="author-list css-12fmpzj e1vx1kx20"><style data-emotion="css rzestn">.css-rzestn{position:relative;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin:0;padding:0;}.css-rzestn:hover .author-name-tooltip{opacity:1;-webkit-transform:translateY(0px);-moz-transform:translateY(0px);-ms-transform:translateY(0px);transform:translateY(0px);}</style><li class="author-list-item css-rzestn e1jay2161"><style data-emotion="css nqg22v">.css-nqg22v{position:absolute;bottom:130%;left:50%;z-index:600;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin-left:-200px;width:400px;font-size:1.4rem;line-height:1.5em;background:white;border-radius:3px;box-shadow:rgba(39, 44, 49, 0.08) 0 12px 26px,rgba(39, 44, 49, 0.06) 1px 3px 8px;opacity:0;-webkit-transition:all 0.35s cubic-bezier(0.4, 0.01, 0.165, 0.99);transition:all 0.35s cubic-bezier(0.4, 0.01, 0.165, 0.99);-webkit-transform:scale(0.98) translateY(15px);-moz-transform:scale(0.98) translateY(15px);-ms-transform:scale(0.98) translateY(15px);transform:scale(0.98) translateY(15px);pointer-events:none;padding:20px 20px 22px;}.css-nqg22v:before{content:'';position:absolute;top:100%;left:50%;display:block;margin-left:-8px;width:0;height:0;border-top:8px solid #fff;border-right:8px solid transparent;border-left:8px solid transparent;}.css-nqg22v .author-info{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;padding:0 0 0 20px;}.css-nqg22v .author-info h2{margin:8px 0 0;font-size:1.6rem;}.css-nqg22v .author-info p{margin:4px 0 0;color:color(var(--midgrey) l(-10%));}.css-nqg22v .author-info .bio h2{margin-top:0;}.css-nqg22v .author-info .bio p{margin-top:0.8em;}.css-nqg22v .author-profile-image{-webkit-flex:0 0 60px;-ms-flex:0 0 60px;flex:0 0 60px;margin:0;width:60px;height:60px;border:none;}@media (max-width: 1170px){.css-nqg22v{margin-left:-50px;width:430px;}.css-nqg22v:before{left:50px;}}@media (max-width: 650px){.css-nqg22v{display:none;}}@media (prefers-color-scheme: dark){.css-nqg22v{background:#22252a;box-shadow:0 12px 26px rgba(0, 0, 0, 0.4);}.css-nqg22v:before{border-top-color:#22252a;}}</style><div class="author-card css-nqg22v"><style data-emotion="css 1kq7wgl">.css-1kq7wgl{display:block;width:100%;height:100%;background:#e4eaed;border-radius:100%;object-fit:cover;}@media (prefers-color-scheme: dark){.css-1kq7wgl{background:#191b1f;}}</style><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper author-profile-image css-1kq7wgl"><div aria-hidden="true" style="padding-top:127.49999999999999%"></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#080808;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/webp" data-srcset="/static/ae5745f513b46a66b9e92732d2515644/c0e62/iury.webp 40w,/static/ae5745f513b46a66b9e92732d2515644/7c251/iury.webp 80w,/static/ae5745f513b46a66b9e92732d2515644/dbc58/iury.webp 120w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="100vw" decoding="async" loading="lazy" data-src="/static/ae5745f513b46a66b9e92732d2515644/8c0cf/iury.png" data-srcset="/static/ae5745f513b46a66b9e92732d2515644/ec9fe/iury.png 40w,/static/ae5745f513b46a66b9e92732d2515644/267ea/iury.png 80w,/static/ae5745f513b46a66b9e92732d2515644/8c0cf/iury.png 120w" alt="Iury Souza"/></picture><noscript><picture><source type="image/webp" srcSet="/static/ae5745f513b46a66b9e92732d2515644/c0e62/iury.webp 40w,/static/ae5745f513b46a66b9e92732d2515644/7c251/iury.webp 80w,/static/ae5745f513b46a66b9e92732d2515644/dbc58/iury.webp 120w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="100vw" decoding="async" loading="lazy" src="/static/ae5745f513b46a66b9e92732d2515644/8c0cf/iury.png" srcSet="/static/ae5745f513b46a66b9e92732d2515644/ec9fe/iury.png 40w,/static/ae5745f513b46a66b9e92732d2515644/267ea/iury.png 80w,/static/ae5745f513b46a66b9e92732d2515644/8c0cf/iury.png 120w" alt="Iury Souza"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div><div class="author-info"><div class="bio"><h2>Iury Souza</h2><p>Coding is communicating</p><p><a href="/about">More about me</a></p></div></div></div><style data-emotion="css 1smzq71">.css-1smzq71{display:block;overflow:hidden;margin:0 -4px;width:40px;height:40px;border:#fff 2px solid;border-radius:100%;-webkit-transition:all 0.5s cubic-bezier(0.4, 0.01, 0.165, 0.99) 700ms;transition:all 0.5s cubic-bezier(0.4, 0.01, 0.165, 0.99) 700ms;}@media (max-width: 500px){.css-1smzq71{width:36px;height:36px;}}@media (prefers-color-scheme: dark){.css-1smzq71{border-color:#1a1c20;}}</style><a class="author-avatar css-1smzq71" href="/about"><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper author-profile-image css-1kq7wgl"><div aria-hidden="true" style="padding-top:127.49999999999999%"></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#080808;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/webp" data-srcset="/static/ae5745f513b46a66b9e92732d2515644/c0e62/iury.webp 40w,/static/ae5745f513b46a66b9e92732d2515644/7c251/iury.webp 80w,/static/ae5745f513b46a66b9e92732d2515644/dbc58/iury.webp 120w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="100vw" decoding="async" loading="lazy" data-src="/static/ae5745f513b46a66b9e92732d2515644/8c0cf/iury.png" data-srcset="/static/ae5745f513b46a66b9e92732d2515644/ec9fe/iury.png 40w,/static/ae5745f513b46a66b9e92732d2515644/267ea/iury.png 80w,/static/ae5745f513b46a66b9e92732d2515644/8c0cf/iury.png 120w" alt="Iury Souza"/></picture><noscript><picture><source type="image/webp" srcSet="/static/ae5745f513b46a66b9e92732d2515644/c0e62/iury.webp 40w,/static/ae5745f513b46a66b9e92732d2515644/7c251/iury.webp 80w,/static/ae5745f513b46a66b9e92732d2515644/dbc58/iury.webp 120w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="100vw" decoding="async" loading="lazy" src="/static/ae5745f513b46a66b9e92732d2515644/8c0cf/iury.png" srcSet="/static/ae5745f513b46a66b9e92732d2515644/ec9fe/iury.png 40w,/static/ae5745f513b46a66b9e92732d2515644/267ea/iury.png 80w,/static/ae5745f513b46a66b9e92732d2515644/8c0cf/iury.png 120w" alt="Iury Souza"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div></a></li></ul><section class="post-full-byline-meta"><h4 class="author-name"><a href="/about">Iury Souza</a></h4><div class="byline-meta-content"><time class="byline-meta-date" dateTime="2020-07-09">09 Jul 2020</time><span class="byline-reading-time"><span class="bull">•</span>9 min read<!-- --></span></div></section></section></div></header><style data-emotion="css 8yjx3u">.css-8yjx3u{margin:25px 0 50px;height:800px;background:#c5d2d9 center center;-webkit-background-size:cover;background-size:cover;border-radius:5px;}@media (max-width: 1170px){.css-8yjx3u{margin:25px -6vw 50px;border-radius:0;}.css-8yjx3u img{max-width:1170px;}}@media (max-width: 800px){.css-8yjx3u{height:400px;}}@media (max-width: 500px){.css-8yjx3u{margin-bottom:4vw;height:350px;}}</style><figure class="css-8yjx3u ewnyor50"><div data-gatsby-image-wrapper="" style="height:100%" class="gatsby-image-wrapper"><div aria-hidden="true" style="padding-top:66.6077738515901%"></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#687888;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/webp" data-srcset="/static/e7bf07c8347aeee98c6cc599e44799e1/57584/twitter-telegram-header.webp 750w,/static/e7bf07c8347aeee98c6cc599e44799e1/90a5d/twitter-telegram-header.webp 1080w,/static/e7bf07c8347aeee98c6cc599e44799e1/1e947/twitter-telegram-header.webp 1366w,/static/e7bf07c8347aeee98c6cc599e44799e1/73622/twitter-telegram-header.webp 1698w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="100vw" decoding="async" loading="lazy" data-src="/static/e7bf07c8347aeee98c6cc599e44799e1/bf098/twitter-telegram-header.jpg" data-srcset="/static/e7bf07c8347aeee98c6cc599e44799e1/7284f/twitter-telegram-header.jpg 750w,/static/e7bf07c8347aeee98c6cc599e44799e1/64b93/twitter-telegram-header.jpg 1080w,/static/e7bf07c8347aeee98c6cc599e44799e1/2baac/twitter-telegram-header.jpg 1366w,/static/e7bf07c8347aeee98c6cc599e44799e1/bf098/twitter-telegram-header.jpg 1698w" alt="A Twitter-Telegram bot in Kotlin"/></picture><noscript><picture><source type="image/webp" srcSet="/static/e7bf07c8347aeee98c6cc599e44799e1/57584/twitter-telegram-header.webp 750w,/static/e7bf07c8347aeee98c6cc599e44799e1/90a5d/twitter-telegram-header.webp 1080w,/static/e7bf07c8347aeee98c6cc599e44799e1/1e947/twitter-telegram-header.webp 1366w,/static/e7bf07c8347aeee98c6cc599e44799e1/73622/twitter-telegram-header.webp 1698w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="100vw" decoding="async" loading="lazy" src="/static/e7bf07c8347aeee98c6cc599e44799e1/bf098/twitter-telegram-header.jpg" srcSet="/static/e7bf07c8347aeee98c6cc599e44799e1/7284f/twitter-telegram-header.jpg 750w,/static/e7bf07c8347aeee98c6cc599e44799e1/64b93/twitter-telegram-header.jpg 1080w,/static/e7bf07c8347aeee98c6cc599e44799e1/2baac/twitter-telegram-header.jpg 1366w,/static/e7bf07c8347aeee98c6cc599e44799e1/bf098/twitter-telegram-header.jpg 1698w" alt="A Twitter-Telegram bot in Kotlin"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div></figure><style data-emotion="css 2wkvmd">.css-2wkvmd{position:relative;margin:0 auto;padding:0 170px 6vw;min-height:230px;font-family:Georgia,serif;font-size:2rem;line-height:1.6em;background:#fff;}@media (max-width: 1170px){.css-2wkvmd{padding:0 11vw;}}@media (max-width: 800px){.css-2wkvmd{padding:0 5vw;font-size:1.8rem;}}@media (max-width: 500px){.css-2wkvmd{padding:0;}}@media (max-width: 500px){.css-2wkvmd .post-full-custom-excerpt{font-size:1.9rem;line-height:1.5em;}}.css-2wkvmd .no-image{padding-top:0;}.css-2wkvmd h1,.css-2wkvmd h2,.css-2wkvmd h3,.css-2wkvmd h4,.css-2wkvmd h5,.css-2wkvmd h6,.css-2wkvmd p,.css-2wkvmd ul,.css-2wkvmd ol,.css-2wkvmd dl,.css-2wkvmd pre,.css-2wkvmd blockquote,.css-2wkvmd .post-full-comments,.css-2wkvmd .footnotes{margin:0 0 1.5em 0;min-width:100%;}@media (max-width: 500px){.css-2wkvmd p,.css-2wkvmd ul,.css-2wkvmd ol,.css-2wkvmd dl,.css-2wkvmd pre,.css-2wkvmd .post-full-comments,.css-2wkvmd .footnotes{margin-bottom:1.28em;}}.css-2wkvmd li{word-break:break-word;}.css-2wkvmd li p{margin:0;}.css-2wkvmd a{color:#15171A;word-break:break-word;box-shadow:#15171A 0 -1px 0 inset;-webkit-transition:all 0.2s ease-in-out;transition:all 0.2s ease-in-out;}.css-2wkvmd a:hover{color:#3eb0ef;-webkit-text-decoration:none;text-decoration:none;box-shadow:#3eb0ef 0 -1px 0 inset;}.css-2wkvmd strong,.css-2wkvmd em{color:#0a0b0c;}.css-2wkvmd small{display:inline-block;line-height:1.6em;}.css-2wkvmd img,.css-2wkvmd video{display:block;margin:1.5em auto;max-width:1040px;height:auto;}@media (max-width: 1040px){.css-2wkvmd img,.css-2wkvmd video{width:100%;}}.css-2wkvmd img[src$='#full']{max-width:none;width:100vw;}.css-2wkvmd img+br+small{display:block;margin-top:-3em;margin-bottom:1.5em;text-align:center;}.css-2wkvmd iframe{margin:0 auto!important;}.css-2wkvmd blockquote{margin:0 0 1.5em;padding:0 1.5em;border-left:#3eb0ef 3px solid;}@media (max-width: 500px){.css-2wkvmd blockquote{padding:0 1.3em;}}.css-2wkvmd blockquote p{margin:0 0 1em 0;color:inherit;font-size:inherit;line-height:inherit;font-style:italic;}.css-2wkvmd blockquote p:last-child{margin-bottom:0;}.css-2wkvmd code{padding:0 5px 2px;font-size:0.8em;line-height:1em;font-weight:400!important;background:#e5eff5;border-radius:3px;}.css-2wkvmd p code{word-break:break-all;}.css-2wkvmd pre{overflow-x:auto;padding:20px;max-width:100%;color:#e5eff5;font-size:1.4rem;line-height:1.5em;border-radius:5px;}.css-2wkvmd pre ::selection{color:#3b474d;}.css-2wkvmd pre code{padding:0;font-size:inherit;line-height:inherit;background:transparent;}.css-2wkvmd pre code :not(span){color:inherit;}.css-2wkvmd .fluid-width-video-wrapper{margin:1.5em 0 3em;}.css-2wkvmd hr{margin:2em 0;}.css-2wkvmd hr:after{content:'';position:absolute;top:-15px;left:50%;display:block;margin-left:-10px;width:1px;height:30px;background:#e4eaed;box-shadow:#fff 0 0 0 5px;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg);}.css-2wkvmd hr+p{margin-top:1.2em;}.css-2wkvmd h1,.css-2wkvmd h2,.css-2wkvmd h3,.css-2wkvmd h4,.css-2wkvmd h5,.css-2wkvmd h6{color:#0a0b0c;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;}.css-2wkvmd h1{margin:0.5em 0 0.4em;font-size:4.2rem;line-height:1.25em;font-weight:600;}.css-2wkvmd p+h1{margin-top:0.8em;}@media (max-width: 800px){.css-2wkvmd h1{font-size:3.2rem;line-height:1.25em;}}.css-2wkvmd h2{margin:0.5em 0 0.4em;font-size:3.2rem;line-height:1.25em;font-weight:600;}.css-2wkvmd p+h2{margin-top:0.8em;}@media (max-width: 800px){.css-2wkvmd h2{margin-bottom:0.3em;font-size:2.8rem;line-height:1.25em;}}.css-2wkvmd h3{margin:0.5em 0 0.2em;font-size:2.5rem;line-height:1.3em;font-weight:600;}.css-2wkvmd h2+h3{margin-top:0.7em;}@media (max-width: 800px){.css-2wkvmd h3{margin-bottom:0.3em;font-size:2.4rem;line-height:1.3em;}}.css-2wkvmd h4{margin:0.5em 0 0.2em;font-size:2.5rem;font-weight:600;}.css-2wkvmd h2+h4{margin-top:0.7em;}.css-2wkvmd h3+h4{margin-top:0;}@media (max-width: 800px){.css-2wkvmd h4{margin-bottom:0.3em;font-size:2.4rem;line-height:1.3em;}}.css-2wkvmd h5{display:block;margin:0.5em 0;padding:0.4em 1em 0.9em;border:0;color:#3eb0ef;font-family:Georgia,serif;font-size:3.2rem;line-height:1.35em;text-align:center;}@media (min-width: 1180px){.css-2wkvmd h5{max-width:1060px;}}@media (max-width: 800px){.css-2wkvmd h5{margin-bottom:1em;margin-left:1.3em;padding:0 0 0.5em;font-size:2.4rem;text-align:initial;}}.css-2wkvmd h6{margin:0.5em 0 0.2em 0;font-size:2rem;font-weight:700;}@media (max-width: 800px){.css-2wkvmd h6{font-size:1.8rem;line-height:1.4em;}}.css-2wkvmd table{display:inline-block;overflow-x:auto;margin:0.5em 0 2.5em;max-width:100%;width:auto;border-spacing:0;border-collapse:collapse;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;font-size:1.6rem;white-space:nowrap;vertical-align:top;}.css-2wkvmd table{-webkit-overflow-scrolling:touch;background:radial-gradient(ellipse at left, rgba(0, 0, 0, 0.2) 0%, rgba(0, 0, 0, 0) 75%) 0 center,radial-gradient(ellipse at right, rgba(0, 0, 0, 0.2) 0%, rgba(0, 0, 0, 0) 75%) 100% center;background-attachment:scroll,scroll;-webkit-background-size:10px 100%,10px 100%;background-size:10px 100%,10px 100%;background-repeat:no-repeat;}.css-2wkvmd table td:first-of-type{background-image:linear-gradient(
      to right,
      rgba(255, 255, 255, 1) 50%,
      rgba(255, 255, 255, 0) 100%
    );-webkit-background-size:20px 100%;background-size:20px 100%;background-repeat:no-repeat;}.css-2wkvmd table td:last-child{background-image:linear-gradient(
      to left,
      rgba(255, 255, 255, 1) 50%,
      rgba(255, 255, 255, 0) 100%
    );-webkit-background-position:100% 0;background-position:100% 0;-webkit-background-size:20px 100%;background-size:20px 100%;background-repeat:no-repeat;}.css-2wkvmd table th{color:#15171A;font-size:1.2rem;font-weight:700;letter-spacing:0.2px;text-align:left;text-transform:uppercase;background-color:#f4f8fb;}.css-2wkvmd table th,.css-2wkvmd table td{padding:6px 12px;border:#e1edf4 1px solid;}@media (prefers-color-scheme: dark){.css-2wkvmd{background:#191b1f;}.css-2wkvmd h1,.css-2wkvmd h2,.css-2wkvmd h3,.css-2wkvmd h4,.css-2wkvmd h6{color:rgba(255, 255, 255, 0.9);}.css-2wkvmd a{color:#fff;box-shadow:inset 0 -1px 0 #fff;}.css-2wkvmd strong{color:#fff;}.css-2wkvmd em{color:#fff;}.css-2wkvmd code{color:#fff;background:#000;}.css-2wkvmd hr{border-top-color:#17191c;}.css-2wkvmd hr:after{background:#17191c;box-shadow:#191b1f 0 0 0 5px;}.css-2wkvmd figcaption{color:rgba(255, 255, 255, 0.6);}.css-2wkvmd table td:first-of-type{background-image:linear-gradient(to right, #191b1f 50%, #191b1f 100%);}.css-2wkvmd table td:last-child{background-image:linear-gradient(270deg, #191b1f 50%, rgba(25, 27, 31, 0));}.css-2wkvmd table th{color:rgba(255, 255, 255, 0.85);background-color:#2b2f36;}.css-2wkvmd table th,.css-2wkvmd table td{border:#2b2f36 1px solid;}.css-2wkvmd .kg-bookmark-container,.css-2wkvmd .kg-bookmark-container:hover{color:rgba(255, 255, 255, 0.75);box-shadow:0 0 1px rgba(255, 255, 255, 0.9);}}.css-2wkvmd code[class*='language-'],.css-2wkvmd pre[class*='language-']{color:white;background:none;font-family:Consolas,Menlo,Monaco,source-code-pro,Courier New,monospace;font-feature-settings:normal;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;margin-bottom:0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;}.css-2wkvmd pre[class*='language-']{overflow:auto;}.css-2wkvmd pre[class*='language-']::-moz-selection{background:hsl(207, 4%, 16%);}.css-2wkvmd pre[class*='language-']::selection{background:hsl(207, 4%, 16%);}.css-2wkvmd pre[class*='language-']::-moz-selection,.css-2wkvmd pre[class*='language-'] ::-moz-selection{text-shadow:none;background:hsla(0, 0%, 100%, 0.15);}.css-2wkvmd pre[class*='language-']::selection,.css-2wkvmd pre[class*='language-'] ::selection{text-shadow:none;background:hsla(0, 0%, 100%, 0.15);}.css-2wkvmd *:not(pre)>code[class*='language-']{border-radius:0.3em;background:rgb(1, 22, 39);color:white;padding:0.15em 0.5em;white-space:normal;}.css-2wkvmd .token.attr-name{color:rgb(173, 219, 103);font-style:italic;}.css-2wkvmd .token.comment{color:rgb(128, 147, 147);}.css-2wkvmd .token.string,.css-2wkvmd .token.url{color:rgb(173, 219, 103);}.css-2wkvmd .token.variable{color:rgb(214, 222, 235);}.css-2wkvmd .token.number{color:rgb(247, 140, 108);}.css-2wkvmd .token.builtin,.css-2wkvmd .token.char,.css-2wkvmd .token.constant,.css-2wkvmd .token.function{color:rgb(130, 170, 255);}.css-2wkvmd .token.punctuation{color:rgb(199, 146, 234);}.css-2wkvmd .token.selector,.css-2wkvmd .token.doctype{color:rgb(199, 146, 234);font-style:'italic';}.css-2wkvmd .token.class-name{color:rgb(255, 203, 139);}.css-2wkvmd .token.tag,.css-2wkvmd .token.operator,.css-2wkvmd .token.keyword{color:#ffa7c4;}.css-2wkvmd .token.boolean{color:rgb(255, 88, 116);}.css-2wkvmd .token.property{color:rgb(128, 203, 196);}.css-2wkvmd .token.namespace{color:rgb(178, 204, 214);}.css-2wkvmd pre[data-line]{padding:1em 0 1em 3em;position:relative;}.css-2wkvmd .gatsby-highlight-code-line{background-color:hsla(207, 95%, 15%, 1);display:block;margin-right:-1.3125rem;margin-left:-1.3125rem;padding-right:1em;padding-left:1.25em;border-left:0.25em solid #ffa7c4;}.css-2wkvmd .gatsby-highlight{margin-bottom:1.75rem;margin-left:-1.3125rem;margin-right:-1.3125rem;border-radius:10px;background:#011627;-webkit-overflow-scrolling:touch;overflow:auto;}.css-2wkvmd .gatsby-highlight pre[class*='language-']{float:left;min-width:100%;}</style><section class="post-full-content css-2wkvmd e14ijd7g0"><div><p>Have you ever wondered how <!-- --><strong>Twitter bots<!-- --></strong> work?
Can we integrate them with <!-- --><strong>Telegram<!-- --></strong>?
Is it possible to do this <!-- --><strong>only<!-- --></strong> with <!-- --><strong>Kotlin<!-- --></strong>?<!-- --></p>
<!-- --><p>Fret not! Follow me while we uncover these mysteries!<!-- --></p>
<!-- --><h3>What we’ll be creating<!-- --></h3>
<!-- --><p>The idea here is pretty straight forward:
A Twitter bot that downloads videos from tweets and sends them to me on Telegram.<!-- --></p>
<!-- --><p>Whenever I reply to a post on Twitter that has a video, tagging the bot’s username, the bot will download the video and send it to me on telegram.
Simple enough, right?  You might have even seen something similar in the wild.<!-- --></p>
<!-- --><p><img src="https://i.imgur.com/ov4jueb.png" alt="Example of a similar bot in the wild" title="@BaixaEssaPorra is a popular downloader bot in the brazilian twittersphere"/></p>
<!-- --><h3>Getting a little more technical<!-- --></h3>
<!-- --><p>Now that we know what we want, how can we achieve this?<!-- --></p>
<!-- --><p>We’ll have an application running locally on our machines that will somehow <!-- --><strong>listen to tweets that mention another user<!-- --></strong>.
After being notified of this event, we will need to <!-- --><strong>fetch the video URL<!-- --></strong> from the tweet we’re replying to, <!-- --><strong>download the video<!-- --></strong> and finally <!-- --><strong>send it over to a telegram user<!-- --></strong> using the a bot.<!-- --></p>
<!-- --><p>After reading the <!-- --><a href="https://developer.twitter.com/en/docs">Twitter developer docs<!-- --></a> I’ve found they offer 3 possibilities:<!-- --></p>
<!-- --><ul>
<!-- --><li><a href="https://developer.twitter.com/en/docs/tweets/timelines/api-reference/get-statuses-mentions_timeline">HTTP Polling<!-- --></a></li>
<!-- --><li><a href="https://developer.twitter.com/en/docs/tutorials/consuming-streaming-data#consuming-the-stream">HTTP Streaming<!-- --></a></li>
<!-- --><li><a href="https://developer.twitter.com/en/docs/accounts-and-users/subscribe-account-activity/overview">WebHooks<!-- --></a></li>
<!-- --></ul>
<!-- --><p>(If you’re not familiar with these concepts you can check this <!-- --><a href="https://medium.com/@jeff.lee6268/getting-started-with-realtime-b5a8773deb1a">article<!-- --></a> to understand the basics.)<!-- --></p>
<!-- --><h3>Choosing our tools<!-- --></h3>
<!-- --><p>Now, since we’re planning to use Kotlin to develop this, the first thing I did before diving-in was a little research (as usual). It seems we have some library options to make this task a little smoother.<!-- --></p>
<!-- --><p>Here’s what I found:<!-- --></p>
<!-- --><ul>
<!-- --><li>There’s an unofficial Java library for the Twitter API called <!-- --><a href="http://twitter4j.org/en/">Twitter4j<!-- --></a></li>
<!-- --><li>There’s a Java HTTP client for consuming Twitter’s realtime streaming API called  <!-- --><a href="https://github.com/twitter/hbc">HBC<!-- --></a></li>
<!-- --><li>There’s a wrapper for the Telegram bot API written in Kotlin called <!-- --><a href="https://github.com/kotlin-telegram-bot/kotlin-telegram-bot">kotlin-telegram-bot<!-- --></a></li>
<!-- --></ul>
<!-- --><p>Sweet! The job just got a whole lot easier now that we don’t need to build the HTTP clients for any of these.<!-- --></p>
<!-- --><p>The only issue is that we don’t have any java/kotlin library to work with the <!-- --><code class="language-text">WebHooks<!-- --></code> api, so we’ll be using the ones above.<!-- --></p>
<!-- --><h3>Let’s code!<!-- --></h3>
<!-- --><p>First of all we need to get the keys to play with these services.<!-- --></p>
<!-- --><p>To get Twitter keys we’ll need to create a Twitter App, you can get yours <!-- --><a href="https://developer.twitter.com/en/account/get-started">here<!-- --></a>
To get <!-- --><code class="language-text">Telegram<!-- --></code>’s token is just as simple as talking to the <!-- --><a href="https://web.telegram.org/#/im?p=@BotFather">BotFather<!-- --></a></p>
<!-- --><h4>Hiding keys, tokens and secrets<!-- --></h4>
<!-- --><p>First, we need a mechanism to load keys, secrets, userIds and tokens used in the project. It is a good practice to keep our keys out of version control.<!-- --></p>
<!-- --><p>To do that, we create a json file with all the keys and put it in the <!-- --><code class="language-text">resources<!-- --></code> folder.<!-- --></p>
<!-- --><div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{<!-- --></span>
  <!-- --><span class="token property">&quot;consumerKey&quot;<!-- --></span><span class="token operator">:<!-- --></span> <!-- --><span class="token string">&quot;abc1234DEF1234GHI456&quot;<!-- --></span><span class="token punctuation">,<!-- --></span>
  <!-- --><span class="token property">&quot;consumerSecret&quot;<!-- --></span><span class="token operator">:<!-- --></span> <!-- --><span class="token string">&quot;abc1234DEF1234GHI456abc1234DEF1234GHI456&quot;<!-- --></span><span class="token punctuation">,<!-- --></span>
  <!-- --><span class="token property">&quot;token&quot;<!-- --></span><span class="token operator">:<!-- --></span> <!-- --><span class="token string">&quot;0123456789-abc1234DEF1234GHI456&quot;<!-- --></span><span class="token punctuation">,<!-- --></span>
  <!-- --><span class="token property">&quot;tokenSecret&quot;<!-- --></span><span class="token operator">:<!-- --></span> <!-- --><span class="token string">&quot;abc1234DEF1234GHI456abc1234DEF1234GHI456&quot;<!-- --></span><span class="token punctuation">,<!-- --></span>
  <!-- --><span class="token property">&quot;telegramToken&quot;<!-- --></span><span class="token operator">:<!-- --></span> <!-- --><span class="token string">&quot;0123456789:abc1234DEF1234GHI456-abc1234DEF1234GHI456&quot;<!-- --></span><span class="token punctuation">,<!-- --></span>
  <!-- --><span class="token property">&quot;twitterUserId&quot;<!-- --></span><span class="token operator">:<!-- --></span> <!-- --><span class="token string">&quot;012345678901234567890123456789&quot;<!-- --></span><span class="token punctuation">,<!-- --></span>
  <!-- --><span class="token property">&quot;telegramUserId&quot;<!-- --></span><span class="token operator">:<!-- --></span> <!-- --><span class="token string">&quot;01234567890123456789&quot;<!-- --></span>
<!-- --><span class="token punctuation">}<!-- --></span></code></pre></div>
<!-- --><p>Then, we can use <!-- --><a href="https://github.com/square/moshi">Moshi<!-- --></a> to simplify deserialization and the <!-- --><code class="language-text">AuthLoader<!-- --></code> class to wrap it up.<!-- --></p>
<!-- --><p>Add this to your <!-- --><code class="language-text">gradle<!-- --></code> file<!-- --></p>
<!-- --><div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token function">implementation<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token string-literal singleline"><span class="token string">&quot;com.squareup.moshi:moshi:1.9.3&quot;<!-- --></span></span><span class="token punctuation">)<!-- --></span>
<!-- --><span class="token function">implementation<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token string-literal singleline"><span class="token string">&quot;com.squareup.moshi:moshi-kotlin:1.9.3&quot;<!-- --></span></span><span class="token punctuation">)<!-- --></span>
<!-- --><span class="token function">kapt<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token string-literal singleline"><span class="token string">&quot;com.squareup.moshi:moshi-kotlin-codegen:1.9.3&quot;<!-- --></span></span><span class="token punctuation">)<!-- --></span></code></pre></div>
<!-- --><hr/>
<!-- --><div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">object<!-- --></span> MoshiWrapper <!-- --><span class="token punctuation">{<!-- --></span>
    <!-- --><span class="token keyword">val<!-- --></span> instance<!-- --><span class="token operator">:<!-- --></span> Moshi <!-- --><span class="token operator">=<!-- --></span> Moshi<!-- --><span class="token punctuation">.<!-- --></span><span class="token function">Builder<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token punctuation">)<!-- --></span>
        <!-- --><span class="token punctuation">.<!-- --></span><span class="token function">add<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token function">KotlinJsonAdapterFactory<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token punctuation">)<!-- --></span><span class="token punctuation">)<!-- --></span>
        <!-- --><span class="token punctuation">.<!-- --></span><span class="token function">build<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token punctuation">)<!-- --></span>

    <!-- --><span class="token keyword">inline<!-- --></span> <!-- --><span class="token keyword">fun<!-- --></span> <!-- --><span class="token operator">&lt;<!-- --></span><span class="token keyword">reified<!-- --></span> T <!-- --><span class="token operator">:<!-- --></span> Any<!-- --><span class="token operator">&gt;<!-- --></span> <!-- --><span class="token function">fromJson<!-- --></span><span class="token punctuation">(<!-- --></span>type<!-- --><span class="token operator">:<!-- --></span> KClass<!-- --><span class="token operator">&lt;<!-- --></span>T<!-- --><span class="token operator">&gt;<!-- --></span><span class="token punctuation">,<!-- --></span> json<!-- --><span class="token operator">:<!-- --></span> String<!-- --><span class="token punctuation">)<!-- --></span><span class="token operator">:<!-- --></span> T<!-- --><span class="token operator">?<!-- --></span> <!-- --><span class="token punctuation">{<!-- --></span>
        <!-- --><span class="token keyword">return<!-- --></span> instance<!-- --><span class="token punctuation">.<!-- --></span><span class="token function">adapter<!-- --></span><span class="token punctuation">(<!-- --></span>type<!-- --><span class="token punctuation">.<!-- --></span>java<!-- --><span class="token punctuation">)<!-- --></span><span class="token punctuation">.<!-- --></span><span class="token function">fromJson<!-- --></span><span class="token punctuation">(<!-- --></span>json<!-- --><span class="token punctuation">)<!-- --></span>
    <!-- --><span class="token punctuation">}<!-- --></span>
<!-- --><span class="token punctuation">}<!-- --></span></code></pre></div>
<!-- --><hr/>
<!-- --><div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token annotation builtin">@JsonClass<!-- --></span><span class="token punctuation">(<!-- --></span>generateAdapter <!-- --><span class="token operator">=<!-- --></span> <!-- --><span class="token boolean">true<!-- --></span><span class="token punctuation">)<!-- --></span>
<!-- --><span class="token keyword">data<!-- --></span> <!-- --><span class="token keyword">class<!-- --></span> <!-- --><span class="token function">AuthData<!-- --></span><span class="token punctuation">(<!-- --></span>
    <!-- --><span class="token keyword">val<!-- --></span> consumerKey<!-- --><span class="token operator">:<!-- --></span> String<!-- --><span class="token punctuation">,<!-- --></span>
    <!-- --><span class="token keyword">val<!-- --></span> consumerSecret<!-- --><span class="token operator">:<!-- --></span> String<!-- --><span class="token punctuation">,<!-- --></span>
    <!-- --><span class="token keyword">val<!-- --></span> token<!-- --><span class="token operator">:<!-- --></span> String<!-- --><span class="token punctuation">,<!-- --></span>
    <!-- --><span class="token keyword">val<!-- --></span> tokenSecret<!-- --><span class="token operator">:<!-- --></span> String<!-- --><span class="token punctuation">,<!-- --></span>
    <!-- --><span class="token keyword">val<!-- --></span> telegramToken<!-- --><span class="token operator">:<!-- --></span> String<!-- --><span class="token punctuation">,<!-- --></span>
    <!-- --><span class="token keyword">val<!-- --></span> twitterUserId<!-- --><span class="token operator">:<!-- --></span> Long<!-- --><span class="token punctuation">,<!-- --></span>
    <!-- --><span class="token keyword">val<!-- --></span> telegramUserId<!-- --><span class="token operator">:<!-- --></span> Long
<!-- --><span class="token punctuation">)<!-- --></span></code></pre></div>
<!-- --><hr/>
<!-- --><div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">object<!-- --></span> AuthLoader <!-- --><span class="token punctuation">{<!-- --></span>

    <!-- --><span class="token keyword">fun<!-- --></span> <!-- --><span class="token function">toOAuth<!-- --></span><span class="token punctuation">(<!-- --></span>authData<!-- --><span class="token operator">:<!-- --></span> AuthData<!-- --><span class="token punctuation">)<!-- --></span><span class="token operator">:<!-- --></span> OAuth1 <!-- --><span class="token punctuation">{<!-- --></span>
        <!-- --><span class="token keyword">val<!-- --></span> <!-- --><span class="token punctuation">(<!-- --></span>consumerKey<!-- --><span class="token punctuation">,<!-- --></span> consumerSecret<!-- --><span class="token punctuation">,<!-- --></span> token<!-- --><span class="token punctuation">,<!-- --></span> tokenSecret<!-- --><span class="token punctuation">)<!-- --></span> <!-- --><span class="token operator">=<!-- --></span> authData
        <!-- --><span class="token keyword">return<!-- --></span> <!-- --><span class="token function">OAuth1<!-- --></span><span class="token punctuation">(<!-- --></span>consumerKey<!-- --><span class="token punctuation">,<!-- --></span> consumerSecret<!-- --><span class="token punctuation">,<!-- --></span> token<!-- --><span class="token punctuation">,<!-- --></span> tokenSecret<!-- --><span class="token punctuation">)<!-- --></span>
    <!-- --><span class="token punctuation">}<!-- --></span>

    <!-- --><span class="token keyword">fun<!-- --></span> <!-- --><span class="token function">getAuthDataFrom<!-- --></span><span class="token punctuation">(<!-- --></span>fileName<!-- --><span class="token operator">:<!-- --></span> String<!-- --><span class="token punctuation">)<!-- --></span><span class="token operator">:<!-- --></span> AuthData <!-- --><span class="token punctuation">{<!-- --></span>
        <!-- --><span class="token keyword">val<!-- --></span> fileContent <!-- --><span class="token operator">=<!-- --></span> <!-- --><span class="token function">getFileFromResources<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token string-literal singleline"><span class="token string">&quot;/<!-- --></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$<!-- --></span><span class="token expression">fileName<!-- --></span></span><span class="token string">&quot;<!-- --></span></span><span class="token punctuation">)<!-- --></span>
        <!-- --><span class="token keyword">return<!-- --></span> MoshiWrapper<!-- --><span class="token punctuation">.<!-- --></span><span class="token function">fromJson<!-- --></span><span class="token punctuation">(<!-- --></span>
            AuthData<!-- --><span class="token operator">::<!-- --></span><span class="token keyword">class<!-- --></span><span class="token punctuation">,<!-- --></span>
            fileContent
        <!-- --><span class="token punctuation">)<!-- --></span><span class="token operator">!!<!-- --></span>
    <!-- --><span class="token punctuation">}<!-- --></span>

    <!-- --><span class="token keyword">private<!-- --></span> <!-- --><span class="token keyword">fun<!-- --></span> <!-- --><span class="token function">getFileFromResources<!-- --></span><span class="token punctuation">(<!-- --></span>fileName<!-- --><span class="token operator">:<!-- --></span> String<!-- --><span class="token punctuation">)<!-- --></span><span class="token operator">:<!-- --></span> String <!-- --><span class="token punctuation">{<!-- --></span>
        <!-- --><span class="token keyword">val<!-- --></span> resource <!-- --><span class="token operator">=<!-- --></span> <!-- --><span class="token keyword">this<!-- --></span><span class="token operator">::<!-- --></span><span class="token keyword">class<!-- --></span><span class="token punctuation">.<!-- --></span>java<!-- --><span class="token punctuation">.<!-- --></span><span class="token function">getResource<!-- --></span><span class="token punctuation">(<!-- --></span>fileName<!-- --><span class="token punctuation">)<!-- --></span>
        <!-- --><span class="token keyword">return<!-- --></span> <!-- --><span class="token keyword">if<!-- --></span> <!-- --><span class="token punctuation">(<!-- --></span>resource <!-- --><span class="token operator">==<!-- --></span> <!-- --><span class="token keyword">null<!-- --></span><span class="token punctuation">)<!-- --></span> <!-- --><span class="token punctuation">{<!-- --></span>
            <!-- --><span class="token keyword">throw<!-- --></span> <!-- --><span class="token function">IllegalArgumentException<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token string-literal singleline"><span class="token string">&quot;file not found!&quot;<!-- --></span></span><span class="token punctuation">)<!-- --></span>
        <!-- --><span class="token punctuation">}<!-- --></span> <!-- --><span class="token keyword">else<!-- --></span> <!-- --><span class="token punctuation">{<!-- --></span>
            <!-- --><span class="token function">File<!-- --></span><span class="token punctuation">(<!-- --></span>resource<!-- --><span class="token punctuation">.<!-- --></span>file<!-- --><span class="token punctuation">)<!-- --></span><span class="token punctuation">.<!-- --></span><span class="token function">readText<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token punctuation">)<!-- --></span>
        <!-- --><span class="token punctuation">}<!-- --></span>
    <!-- --><span class="token punctuation">}<!-- --></span>
<!-- --><span class="token punctuation">}<!-- --></span></code></pre></div>
<!-- --><h4>Filtering real time tweets<!-- --></h4>
<!-- --><p>The <!-- --><a href="https://developer.twitter.com/en/docs/tweets/filter-realtime/api-reference/post-statuses-filter">docs<!-- --></a> tell us that we can filter tweets using some parameters like <!-- --><code class="language-text">keywords<!-- --></code> and <!-- --><code class="language-text">userIds<!-- --></code></p>
<!-- --><p>In order to do that we can use the <!-- --><code class="language-text">HBC-core<!-- --></code> and <!-- --><code class="language-text">HBC-Twitter4j<!-- --></code> integration.<!-- --></p>
<!-- --><p>So, we’ll be using a <!-- --><code class="language-text">Twitter4jStatusClient<!-- --></code> to listen to filtered status updates. This class is a wrapper of HBC’s  <!-- --><code class="language-text">BasicClient<!-- --></code> . It is  responsible for opening the connection with the Streaming API and to pass filter parameters. The Integration with <!-- --><code class="language-text">Twitter4j<!-- --></code> removes the need to model and deserialize the json responses when receiving status updates.<!-- --></p>
<!-- --><p>First we add the dependencies<!-- --></p>
<!-- --><div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token function">implementation<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token string-literal singleline"><span class="token string">&quot;com.twitter:hbc-core:2.2.0&quot;<!-- --></span></span><span class="token punctuation">)<!-- --></span>
<!-- --><span class="token function">implementation<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token string-literal singleline"><span class="token string">&quot;com.twitter:hbc-twitter4j:2.2.0&quot;<!-- --></span></span><span class="token punctuation">)<!-- --></span>
<!-- --><span class="token function">implementation<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token string-literal singleline"><span class="token string">&quot;org.twitter4j:twitter4j-core:4.0.7&quot;<!-- --></span></span><span class="token punctuation">)<!-- --></span>
<!-- --><span class="token function">implementation<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token string-literal singleline"><span class="token string">&quot;org.slf4j:slf4j-log4j12:1.6.0&quot;<!-- --></span></span><span class="token punctuation">)<!-- --></span> <!-- --><span class="token comment">//needed for twitter4j<!-- --></span>
<!-- --><span class="token function">implementation<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token string-literal singleline"><span class="token string">&quot;io.github.kotlin-telegram-bot.kotlin-telegram-bot:telegram:5.0.0&quot;<!-- --></span></span><span class="token punctuation">)<!-- --></span></code></pre></div>
<!-- --><p>This is the implementation I came up to simplify consuming this stream:<!-- --></p>
<!-- --><div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">class<!-- --></span> <!-- --><span class="token function">FilteredStatusStream<!-- --></span><span class="token punctuation">(<!-- --></span>
    <!-- --><span class="token keyword">private<!-- --></span> <!-- --><span class="token keyword">val<!-- --></span> authData<!-- --><span class="token operator">:<!-- --></span> AuthData<!-- --><span class="token punctuation">,<!-- --></span>
    <!-- --><span class="token keyword">private<!-- --></span> <!-- --><span class="token keyword">val<!-- --></span> filterParams<!-- --><span class="token operator">:<!-- --></span> FilterParams<!-- --><span class="token punctuation">,<!-- --></span>
    <!-- --><span class="token keyword">private<!-- --></span> <!-- --><span class="token keyword">val<!-- --></span> statusListener<!-- --><span class="token operator">:<!-- --></span> <!-- --><span class="token punctuation">(<!-- --></span>Status<!-- --><span class="token punctuation">)<!-- --></span> <!-- --><span class="token operator">-&gt;<!-- --></span> Unit
<!-- --><span class="token punctuation">)<!-- --></span> <!-- --><span class="token punctuation">{<!-- --></span>

    <!-- --><span class="token keyword">companion<!-- --></span> <!-- --><span class="token keyword">object<!-- --></span> <!-- --><span class="token punctuation">{<!-- --></span>
        <!-- --><span class="token keyword">private<!-- --></span> <!-- --><span class="token keyword">const<!-- --></span> <!-- --><span class="token keyword">val<!-- --></span> CAPACITY <!-- --><span class="token operator">=<!-- --></span> <!-- --><span class="token number">1_000<!-- --></span>
        <!-- --><span class="token keyword">private<!-- --></span> <!-- --><span class="token keyword">const<!-- --></span> <!-- --><span class="token keyword">val<!-- --></span> THREAD_POOL_SIZE <!-- --><span class="token operator">=<!-- --></span> <!-- --><span class="token number">4<!-- --></span>
    <!-- --><span class="token punctuation">}<!-- --></span>

    <!-- --><span class="token keyword">var<!-- --></span> statusClient<!-- --><span class="token operator">:<!-- --></span> Twitter4jStatusClient<!-- --><span class="token operator">?<!-- --></span> <!-- --><span class="token operator">=<!-- --></span> <!-- --><span class="token keyword">null<!-- --></span>

    <!-- --><span class="token keyword">fun<!-- --></span> <!-- --><span class="token function">start<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token punctuation">)<!-- --></span> <!-- --><span class="token punctuation">{<!-- --></span>
        <!-- --><span class="token keyword">val<!-- --></span> <!-- --><span class="token punctuation">(<!-- --></span>followings<!-- --><span class="token punctuation">,<!-- --></span> keywords<!-- --><span class="token punctuation">)<!-- --></span> <!-- --><span class="token operator">=<!-- --></span> filterParams

        <!-- --><span class="token keyword">val<!-- --></span> filters <!-- --><span class="token operator">=<!-- --></span> <!-- --><span class="token function">createStatusFilters<!-- --></span><span class="token punctuation">(<!-- --></span>followings<!-- --><span class="token punctuation">,<!-- --></span> keywords<!-- --><span class="token punctuation">)<!-- --></span>
        <!-- --><span class="token keyword">val<!-- --></span> msgQueue <!-- --><span class="token operator">=<!-- --></span> LinkedBlockingQueue<!-- --><span class="token operator">&lt;<!-- --></span>String<!-- --><span class="token operator">&gt;<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token number">100<!-- --></span> <!-- --><span class="token operator">*<!-- --></span> CAPACITY<!-- --><span class="token punctuation">)<!-- --></span>
        <!-- --><span class="token keyword">val<!-- --></span> client <!-- --><span class="token operator">=<!-- --></span> <!-- --><span class="token function">createBasicClient<!-- --></span><span class="token punctuation">(<!-- --></span>filters<!-- --><span class="token punctuation">,<!-- --></span> msgQueue<!-- --><span class="token punctuation">,<!-- --></span> CAPACITY<!-- --><span class="token punctuation">)<!-- --></span>

        statusClient <!-- --><span class="token operator">=<!-- --></span> <!-- --><span class="token function">createStatusClient<!-- --></span><span class="token punctuation">(<!-- --></span>client<!-- --><span class="token punctuation">,<!-- --></span> msgQueue<!-- --><span class="token punctuation">,<!-- --></span> THREAD_POOL_SIZE<!-- --><span class="token punctuation">)<!-- --></span><span class="token punctuation">.<!-- --></span><span class="token function">apply<!-- --></span> <!-- --><span class="token punctuation">{<!-- --></span>
            <!-- --><span class="token function">connect<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token punctuation">)<!-- --></span>
            <!-- --><span class="token function">process<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token punctuation">)<!-- --></span>
        <!-- --><span class="token punctuation">}<!-- --></span>
    <!-- --><span class="token punctuation">}<!-- --></span>

    <!-- --><span class="token keyword">fun<!-- --></span> <!-- --><span class="token function">stop<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token punctuation">)<!-- --></span> <!-- --><span class="token punctuation">{<!-- --></span>
        statusClient<!-- --><span class="token operator">?<!-- --></span><span class="token punctuation">.<!-- --></span><span class="token function">stop<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token punctuation">)<!-- --></span>
    <!-- --><span class="token punctuation">}<!-- --></span>

    <!-- --><span class="token keyword">private<!-- --></span> <!-- --><span class="token keyword">fun<!-- --></span> <!-- --><span class="token function">createStatusFilters<!-- --></span><span class="token punctuation">(<!-- --></span>followings<!-- --><span class="token operator">:<!-- --></span> List<!-- --><span class="token operator">&lt;<!-- --></span>Long<!-- --><span class="token operator">&gt;<!-- --></span><span class="token punctuation">,<!-- --></span> terms<!-- --><span class="token operator">:<!-- --></span> List<!-- --><span class="token operator">&lt;<!-- --></span>String<!-- --><span class="token operator">&gt;<!-- --></span><span class="token punctuation">)<!-- --></span> <!-- --><span class="token operator">=<!-- --></span> <!-- --><span class="token function">StatusesFilterEndpoint<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token punctuation">)<!-- --></span><span class="token punctuation">.<!-- --></span><span class="token function">apply<!-- --></span> <!-- --><span class="token punctuation">{<!-- --></span>
        <!-- --><span class="token function">followings<!-- --></span><span class="token punctuation">(<!-- --></span>followings<!-- --><span class="token punctuation">)<!-- --></span>
        <!-- --><span class="token function">trackTerms<!-- --></span><span class="token punctuation">(<!-- --></span>terms<!-- --><span class="token punctuation">)<!-- --></span>
    <!-- --><span class="token punctuation">}<!-- --></span>

    <!-- --><span class="token keyword">private<!-- --></span> <!-- --><span class="token keyword">fun<!-- --></span> <!-- --><span class="token function">createStatusClient<!-- --></span><span class="token punctuation">(<!-- --></span>
        client<!-- --><span class="token operator">:<!-- --></span> BasicClient<!-- --><span class="token operator">?<!-- --></span><span class="token punctuation">,<!-- --></span>
        msgQueue<!-- --><span class="token operator">:<!-- --></span> LinkedBlockingQueue<!-- --><span class="token operator">&lt;<!-- --></span>String<!-- --><span class="token operator">&gt;<!-- --></span><span class="token punctuation">,<!-- --></span>
        poolSize<!-- --><span class="token operator">:<!-- --></span> Int
    <!-- --><span class="token punctuation">)<!-- --></span> <!-- --><span class="token operator">=<!-- --></span> <!-- --><span class="token function">Twitter4jStatusClient<!-- --></span><span class="token punctuation">(<!-- --></span>
        client<!-- --><span class="token punctuation">,<!-- --></span>
        msgQueue<!-- --><span class="token punctuation">,<!-- --></span>
        <!-- --><span class="token function">listOf<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token function">DefaultStatusListener<!-- --></span><span class="token punctuation">(<!-- --></span>statusListener<!-- --><span class="token punctuation">)<!-- --></span><span class="token punctuation">)<!-- --></span><span class="token punctuation">,<!-- --></span>
        Executors<!-- --><span class="token punctuation">.<!-- --></span><span class="token function">newFixedThreadPool<!-- --></span><span class="token punctuation">(<!-- --></span>poolSize<!-- --><span class="token punctuation">)<!-- --></span>
    <!-- --><span class="token punctuation">)<!-- --></span>

    <!-- --><span class="token keyword">private<!-- --></span> <!-- --><span class="token keyword">fun<!-- --></span> <!-- --><span class="token function">createBasicClient<!-- --></span><span class="token punctuation">(<!-- --></span>
        endpoint<!-- --><span class="token operator">:<!-- --></span> StatusesFilterEndpoint<!-- --><span class="token punctuation">,<!-- --></span>
        msgQueue<!-- --><span class="token operator">:<!-- --></span> LinkedBlockingQueue<!-- --><span class="token operator">&lt;<!-- --></span>String<!-- --><span class="token operator">&gt;<!-- --></span><span class="token punctuation">,<!-- --></span>
        eventQueueSize<!-- --><span class="token operator">:<!-- --></span> Int
    <!-- --><span class="token punctuation">)<!-- --></span> <!-- --><span class="token operator">=<!-- --></span> <!-- --><span class="token function">ClientBuilder<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token punctuation">)<!-- --></span>
        <!-- --><span class="token punctuation">.<!-- --></span><span class="token function">hosts<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token function">HttpHosts<!-- --></span><span class="token punctuation">(<!-- --></span>Constants<!-- --><span class="token punctuation">.<!-- --></span>STREAM_HOST<!-- --><span class="token punctuation">)<!-- --></span><span class="token punctuation">)<!-- --></span>
        <!-- --><span class="token punctuation">.<!-- --></span><span class="token function">authentication<!-- --></span><span class="token punctuation">(<!-- --></span>AuthLoader<!-- --><span class="token punctuation">.<!-- --></span><span class="token function">toOAuth<!-- --></span><span class="token punctuation">(<!-- --></span>authData<!-- --><span class="token punctuation">)<!-- --></span><span class="token punctuation">)<!-- --></span>
        <!-- --><span class="token punctuation">.<!-- --></span><span class="token function">endpoint<!-- --></span><span class="token punctuation">(<!-- --></span>endpoint<!-- --><span class="token punctuation">)<!-- --></span>
        <!-- --><span class="token punctuation">.<!-- --></span><span class="token function">processor<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token function">StringDelimitedProcessor<!-- --></span><span class="token punctuation">(<!-- --></span>msgQueue<!-- --><span class="token punctuation">)<!-- --></span><span class="token punctuation">)<!-- --></span>
        <!-- --><span class="token punctuation">.<!-- --></span><span class="token function">eventMessageQueue<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token function">LinkedBlockingQueue<!-- --></span><span class="token punctuation">(<!-- --></span>eventQueueSize<!-- --><span class="token punctuation">)<!-- --></span><span class="token punctuation">)<!-- --></span>
        <!-- --><span class="token punctuation">.<!-- --></span><span class="token function">build<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token punctuation">)<!-- --></span>
<!-- --><span class="token punctuation">}<!-- --></span></code></pre></div>
<!-- --><p>It looks like a lot, but it is really just configuration code. We’re just hiding the complexity of setting up a Twitter steaming client.
Now we can listen to the tweets from the user with the <!-- --><code class="language-text">twitterUserId<!-- --></code> whenever he mentions the tweeter handle <!-- --><code class="language-text">@MandaProZap<!-- --></code> just by calling:<!-- --></p>
<!-- --><div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">val<!-- --></span> authData <!-- --><span class="token operator">=<!-- --></span> AuthLoader<!-- --><span class="token punctuation">.<!-- --></span><span class="token function">getAuthDataFrom<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token string-literal singleline"><span class="token string">&quot;auth_data.json&quot;<!-- --></span></span><span class="token punctuation">)<!-- --></span>
<!-- --><span class="token keyword">val<!-- --></span> filterParams <!-- --><span class="token operator">=<!-- --></span> <!-- --><span class="token function">FilterParams<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token function">listOf<!-- --></span><span class="token punctuation">(<!-- --></span>authData<!-- --><span class="token punctuation">.<!-- --></span>twitterUserId<!-- --><span class="token punctuation">)<!-- --></span><span class="token punctuation">,<!-- --></span><span class="token function">listOf<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token string-literal singleline"><span class="token string">&quot;@MandaProZap&quot;<!-- --></span></span><span class="token punctuation">)<!-- --></span><span class="token punctuation">)<!-- --></span>
    
<!-- --><span class="token function">FilteredStatusStream<!-- --></span><span class="token punctuation">(<!-- --></span>authData<!-- --><span class="token punctuation">,<!-- --></span> filterParams<!-- --><span class="token punctuation">)<!-- --></span> <!-- --><span class="token punctuation">{<!-- --></span> newStatus <!-- --><span class="token operator">-&gt;<!-- --></span>
        <!-- --><span class="token function">println<!-- --></span><span class="token punctuation">(<!-- --></span>newStatus<!-- --><span class="token punctuation">)<!-- --></span>
    <!-- --><span class="token punctuation">}<!-- --></span><span class="token punctuation">.<!-- --></span><span class="token function">start<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token punctuation">)<!-- --></span></code></pre></div>
<!-- --><p>Awesome, right?!😁<!-- --></p>
<!-- --><p>But… how do we get the video data?
First of all, just a quick recap: We want to get the video from the <!-- --><strong>tweet<!-- --></strong> that we’re <!-- --><strong>replying<!-- --></strong> to.<!-- --></p>
<!-- --><p>This <!-- --><code class="language-text">newStatus<!-- --></code> we’re getting from the stream is our <!-- --><strong>own tweet<!-- --></strong>. So we still need to get the parent tweet and it’s video.<!-- --></p>
<!-- --><h4>Getting media from the parent tweet<!-- --></h4>
<!-- --><p>Inspecting the <!-- --><code class="language-text">Status<!-- --></code> returned from the stream we can see it’s properties:<!-- --></p>
<!-- --><div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token keyword">private<!-- --></span> <!-- --><span class="token class-name">Date<!-- --></span> createdAt<!-- --><span class="token punctuation">;<!-- --></span>
<!-- --><span class="token keyword">private<!-- --></span> <!-- --><span class="token keyword">long<!-- --></span> id<!-- --><span class="token punctuation">;<!-- --></span>
<!-- --><span class="token keyword">private<!-- --></span> <!-- --><span class="token class-name">String<!-- --></span> text<!-- --><span class="token punctuation">;<!-- --></span>
<!-- --><span class="token keyword">private<!-- --></span> <!-- --><span class="token keyword">int<!-- --></span> displayTextRangeStart <!-- --><span class="token operator">=<!-- --></span> <!-- --><span class="token operator">-<!-- --></span><span class="token number">1<!-- --></span><span class="token punctuation">;<!-- --></span>
<!-- --><span class="token keyword">private<!-- --></span> <!-- --><span class="token keyword">int<!-- --></span> displayTextRangeEnd <!-- --><span class="token operator">=<!-- --></span> <!-- --><span class="token operator">-<!-- --></span><span class="token number">1<!-- --></span><span class="token punctuation">;<!-- --></span>
<!-- --><span class="token keyword">private<!-- --></span> <!-- --><span class="token class-name">String<!-- --></span> source<!-- --><span class="token punctuation">;<!-- --></span>
<!-- --><span class="token keyword">private<!-- --></span> <!-- --><span class="token keyword">boolean<!-- --></span> isTruncated<!-- --><span class="token punctuation">;<!-- --></span>
<!-- --><span class="token keyword">private<!-- --></span> <!-- --><span class="token keyword">long<!-- --></span> inReplyToStatusId<!-- --><span class="token punctuation">;<!-- --></span> <!-- --><span class="token comment">//This is the one we need<!-- --></span>
<!-- --><span class="token punctuation">.<!-- --></span>
<!-- --><span class="token punctuation">.<!-- --></span><span class="token punctuation">.<!-- --></span>
<!-- --><span class="token punctuation">.<!-- --></span><span class="token punctuation">.<!-- --></span><span class="token punctuation">.<!-- --></span></code></pre></div>
<!-- --><p>Now we can use <!-- --><code class="language-text">Twitter4j<!-- --></code> to fetch the parent tweet.<!-- --></p>
<!-- --><p>Again, we can simplify it’s usage with this class:<!-- --></p>
<!-- --><div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">class<!-- --></span> <!-- --><span class="token function">TwitterClient<!-- --></span><span class="token punctuation">(<!-- --></span>authData<!-- --><span class="token operator">:<!-- --></span> AuthData<!-- --><span class="token punctuation">)<!-- --></span> <!-- --><span class="token punctuation">{<!-- --></span>

    <!-- --><span class="token keyword">private<!-- --></span> <!-- --><span class="token keyword">val<!-- --></span> twitter<!-- --><span class="token operator">:<!-- --></span> Twitter <!-- --><span class="token operator">=<!-- --></span> <!-- --><span class="token function">TwitterFactory<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token punctuation">)<!-- --></span><span class="token punctuation">.<!-- --></span>instance

    <!-- --><span class="token keyword">init<!-- --></span> <!-- --><span class="token punctuation">{<!-- --></span>
        twitter<!-- --><span class="token punctuation">.<!-- --></span><span class="token function">setOAuthConsumer<!-- --></span><span class="token punctuation">(<!-- --></span>authData<!-- --><span class="token punctuation">.<!-- --></span>consumerKey<!-- --><span class="token punctuation">,<!-- --></span> authData<!-- --><span class="token punctuation">.<!-- --></span>consumerSecret<!-- --><span class="token punctuation">)<!-- --></span>
        <!-- --><span class="token keyword">val<!-- --></span> accessToken <!-- --><span class="token operator">=<!-- --></span> <!-- --><span class="token function">AccessToken<!-- --></span><span class="token punctuation">(<!-- --></span>authData<!-- --><span class="token punctuation">.<!-- --></span>token<!-- --><span class="token punctuation">,<!-- --></span> authData<!-- --><span class="token punctuation">.<!-- --></span>tokenSecret<!-- --><span class="token punctuation">)<!-- --></span>
        twitter<!-- --><span class="token punctuation">.<!-- --></span>oAuthAccessToken <!-- --><span class="token operator">=<!-- --></span> accessToken
    <!-- --><span class="token punctuation">}<!-- --></span>

    <!-- --><span class="token keyword">fun<!-- --></span> <!-- --><span class="token function">getStatusById<!-- --></span><span class="token punctuation">(<!-- --></span>statusId<!-- --><span class="token operator">:<!-- --></span> Long<!-- --><span class="token punctuation">)<!-- --></span><span class="token operator">:<!-- --></span> Status<!-- --><span class="token operator">?<!-- --></span> <!-- --><span class="token punctuation">{<!-- --></span>
        <!-- --><span class="token keyword">return<!-- --></span> runCatching <!-- --><span class="token punctuation">{<!-- --></span> twitter<!-- --><span class="token punctuation">.<!-- --></span><span class="token function">showStatus<!-- --></span><span class="token punctuation">(<!-- --></span>statusId<!-- --><span class="token punctuation">)<!-- --></span> <!-- --><span class="token punctuation">}<!-- --></span><span class="token punctuation">.<!-- --></span><span class="token function">getOrNull<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token punctuation">)<!-- --></span>
    <!-- --><span class="token punctuation">}<!-- --></span>
<!-- --><span class="token punctuation">}<!-- --></span></code></pre></div>
<!-- --><p>Finally we can get the video url like this:<!-- --></p>
<!-- --><div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">val<!-- --></span> twitterClient <!-- --><span class="token operator">=<!-- --></span> <!-- --><span class="token function">TwitterClient<!-- --></span><span class="token punctuation">(<!-- --></span>authData<!-- --><span class="token punctuation">)<!-- --></span>
twitterClient<!-- --><span class="token punctuation">.<!-- --></span><span class="token function">getStatusById<!-- --></span><span class="token punctuation">(<!-- --></span>newStatus<!-- --><span class="token punctuation">.<!-- --></span>inReplyToStatusId<!-- --><span class="token punctuation">)<!-- --></span>
            <!-- --><span class="token operator">?<!-- --></span><span class="token punctuation">.<!-- --></span>mediaEntities
            <!-- --><span class="token operator">?<!-- --></span><span class="token punctuation">.<!-- --></span><span class="token function">mapNotNull<!-- --></span> <!-- --><span class="token punctuation">{<!-- --></span> it<!-- --><span class="token punctuation">.<!-- --></span>videoVariants<!-- --><span class="token punctuation">.<!-- --></span><span class="token function">firstOrNull<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token punctuation">)<!-- --></span><span class="token operator">?<!-- --></span><span class="token punctuation">.<!-- --></span>url <!-- --><span class="token punctuation">}<!-- --></span>
            <!-- --><span class="token operator">?<!-- --></span><span class="token punctuation">.<!-- --></span><span class="token function">forEach<!-- --></span> <!-- --><span class="token punctuation">{<!-- --></span> url <!-- --><span class="token operator">-&gt;<!-- --></span> <!-- --><span class="token function">println<!-- --></span><span class="token punctuation">(<!-- --></span>url<!-- --><span class="token punctuation">)<!-- --></span><span class="token punctuation">}<!-- --></span></code></pre></div>
<!-- --><p>Almost there now! We just need to send the video to Telegram! But wait… if we send this url… we’ll be sending just an url… not an actual video. We can do better!<!-- --></p>
<!-- --><p><strong>Downloading the video<!-- --></strong></p>
<!-- --><p>Since we’re using the <!-- --><code class="language-text">kotlin-telegram-bot<!-- --></code>, and it has transitive dependencies to <!-- --><a href="https://github.com/square/retrofit">retrofit<!-- --></a> it seems like a good idea to using it to download the video file.<!-- --></p>
<!-- --><div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">object<!-- --></span> FileDownloader <!-- --><span class="token punctuation">{<!-- --></span>

    <!-- --><span class="token keyword">private<!-- --></span> <!-- --><span class="token keyword">val<!-- --></span> service <!-- --><span class="token operator">=<!-- --></span> Retrofit
        <!-- --><span class="token punctuation">.<!-- --></span><span class="token function">Builder<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token punctuation">)<!-- --></span>
        <!-- --><span class="token punctuation">.<!-- --></span><span class="token function">baseUrl<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token string-literal singleline"><span class="token string">&quot;http://localhost/&quot;<!-- --></span></span><span class="token punctuation">)<!-- --></span>
        <!-- --><span class="token punctuation">.<!-- --></span><span class="token function">build<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token punctuation">)<!-- --></span>
        <!-- --><span class="token punctuation">.<!-- --></span><span class="token function">create<!-- --></span><span class="token punctuation">(<!-- --></span>FileDownloadService<!-- --><span class="token operator">::<!-- --></span><span class="token keyword">class<!-- --></span><span class="token punctuation">.<!-- --></span>java<!-- --><span class="token punctuation">)<!-- --></span>

    <!-- --><span class="token keyword">suspend<!-- --></span> <!-- --><span class="token keyword">fun<!-- --></span> <!-- --><span class="token function">downloadAndWriteToFile<!-- --></span><span class="token punctuation">(<!-- --></span>url<!-- --><span class="token operator">:<!-- --></span> String<!-- --><span class="token punctuation">)<!-- --></span><span class="token operator">:<!-- --></span> File<!-- --><span class="token operator">?<!-- --></span> <!-- --><span class="token operator">=<!-- --></span> <!-- --><span class="token function">withContext<!-- --></span><span class="token punctuation">(<!-- --></span>Dispatchers<!-- --><span class="token punctuation">.<!-- --></span>IO<!-- --><span class="token punctuation">)<!-- --></span> <!-- --><span class="token punctuation">{<!-- --></span>
        <!-- --><span class="token keyword">val<!-- --></span> body <!-- --><span class="token operator">=<!-- --></span> service<!-- --><span class="token punctuation">.<!-- --></span><span class="token function">downloadFileFrom<!-- --></span><span class="token punctuation">(<!-- --></span>url<!-- --><span class="token punctuation">)<!-- --></span><span class="token punctuation">.<!-- --></span><span class="token function">await<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token punctuation">)<!-- --></span>
        <!-- --><span class="token function">writeToFile<!-- --></span><span class="token punctuation">(<!-- --></span>body<!-- --><span class="token punctuation">)<!-- --></span>
    <!-- --><span class="token punctuation">}<!-- --></span>

    <!-- --><span class="token keyword">private<!-- --></span> <!-- --><span class="token keyword">fun<!-- --></span> <!-- --><span class="token function">writeToFile<!-- --></span><span class="token punctuation">(<!-- --></span>responseBody<!-- --><span class="token operator">:<!-- --></span> ResponseBody<!-- --><span class="token operator">?<!-- --></span><span class="token punctuation">)<!-- --></span><span class="token operator">:<!-- --></span> File<!-- --><span class="token operator">?<!-- --></span> <!-- --><span class="token operator">=<!-- --></span> runCatching <!-- --><span class="token punctuation">{<!-- --></span>
        <!-- --><span class="token function">File<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token string-literal singleline"><span class="token string">&quot;<!-- --></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span><span class="token expression">System<!-- --><span class="token punctuation">.<!-- --></span><span class="token function">currentTimeMillis<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token punctuation">)<!-- --></span></span><span class="token interpolation-punctuation punctuation">}<!-- --></span></span><span class="token string">.mp4&quot;<!-- --></span></span><span class="token punctuation">)<!-- --></span><span class="token punctuation">.<!-- --></span><span class="token function">apply<!-- --></span> <!-- --><span class="token punctuation">{<!-- --></span>
            <!-- --><span class="token function">createNewFile<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token punctuation">)<!-- --></span>
            Okio<!-- --><span class="token punctuation">.<!-- --></span><span class="token function">buffer<!-- --></span><span class="token punctuation">(<!-- --></span>Okio<!-- --><span class="token punctuation">.<!-- --></span><span class="token function">sink<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token keyword">this<!-- --></span><span class="token punctuation">)<!-- --></span><span class="token punctuation">)<!-- --></span><span class="token punctuation">.<!-- --></span><span class="token function">write<!-- --></span><span class="token punctuation">(<!-- --></span>responseBody<!-- --><span class="token operator">!!<!-- --></span><span class="token punctuation">.<!-- --></span><span class="token function">bytes<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token punctuation">)<!-- --></span><span class="token operator">!!<!-- --></span><span class="token punctuation">)<!-- --></span>
        <!-- --><span class="token punctuation">}<!-- --></span>
    <!-- --><span class="token punctuation">}<!-- --></span><span class="token punctuation">.<!-- --></span><span class="token function">getOrNull<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token punctuation">)<!-- --></span>
<!-- --><span class="token punctuation">}<!-- --></span>

<!-- --><span class="token keyword">interface<!-- --></span> FileDownloadService <!-- --><span class="token punctuation">{<!-- --></span>
    <!-- --><span class="token annotation builtin">@GET<!-- --></span>
    <!-- --><span class="token keyword">fun<!-- --></span> <!-- --><span class="token function">downloadFileFrom<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token annotation builtin">@Url<!-- --></span> fileUrl<!-- --><span class="token operator">:<!-- --></span> String<!-- --><span class="token punctuation">)<!-- --></span><span class="token operator">:<!-- --></span> Call<!-- --><span class="token operator">&lt;<!-- --></span>ResponseBody<!-- --><span class="token operator">?<!-- --></span><span class="token operator">&gt;<!-- --></span>
<!-- --><span class="token punctuation">}<!-- --></span></code></pre></div>
<!-- --><p>Here we’re creating a  <!-- --><code class="language-text">FileDownloadService<!-- --></code> with <!-- --><code class="language-text">Retrofit<!-- --></code> and use it to download the url.<!-- --></p>
<!-- --><p>After that we write the data to a file using <!-- --><code class="language-text">Okio<!-- --></code> (also comes bundled with retrofit).<!-- --></p>
<!-- --><p>You can see that we’re using coroutines to switch threads while it still looks like synchronous code.<!-- --></p>
<!-- --><p>This was achieved with a simple extension function on <!-- --><code class="language-text">retrofit<!-- --></code>’s  <!-- --><code class="language-text">Call<!-- --></code>.<!-- --></p>
<!-- --><div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">suspend<!-- --></span> <!-- --><span class="token keyword">fun<!-- --></span> <!-- --><span class="token operator">&lt;<!-- --></span>T<!-- --><span class="token operator">&gt;<!-- --></span> Call<!-- --><span class="token operator">&lt;<!-- --></span>T<!-- --><span class="token operator">&gt;<!-- --></span><span class="token punctuation">.<!-- --></span><span class="token function">await<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token punctuation">)<!-- --></span><span class="token operator">:<!-- --></span> T <!-- --><span class="token punctuation">{<!-- --></span>
    <!-- --><span class="token keyword">return<!-- --></span> suspendCancellableCoroutine <!-- --><span class="token punctuation">{<!-- --></span> continuation <!-- --><span class="token operator">-&gt;<!-- --></span>
        <!-- --><span class="token function">enqueue<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token keyword">object<!-- --></span> <!-- --><span class="token operator">:<!-- --></span> Callback<!-- --><span class="token operator">&lt;<!-- --></span>T<!-- --><span class="token operator">&gt;<!-- --></span> <!-- --><span class="token punctuation">{<!-- --></span>
            <!-- --><span class="token keyword">override<!-- --></span> <!-- --><span class="token keyword">fun<!-- --></span> <!-- --><span class="token function">onResponse<!-- --></span><span class="token punctuation">(<!-- --></span>call<!-- --><span class="token operator">:<!-- --></span> Call<!-- --><span class="token operator">&lt;<!-- --></span>T<!-- --><span class="token operator">&gt;<!-- --></span><span class="token punctuation">,<!-- --></span> response<!-- --><span class="token operator">:<!-- --></span> Response<!-- --><span class="token operator">&lt;<!-- --></span>T<!-- --><span class="token operator">&gt;<!-- --></span><span class="token punctuation">)<!-- --></span> <!-- --><span class="token punctuation">{<!-- --></span>
                <!-- --><span class="token keyword">if<!-- --></span> <!-- --><span class="token punctuation">(<!-- --></span>response<!-- --><span class="token punctuation">.<!-- --></span>isSuccessful <!-- --><span class="token operator">&amp;&amp;<!-- --></span> response<!-- --><span class="token punctuation">.<!-- --></span><span class="token function">body<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token punctuation">)<!-- --></span> <!-- --><span class="token operator">!=<!-- --></span> <!-- --><span class="token keyword">null<!-- --></span><span class="token punctuation">)<!-- --></span> <!-- --><span class="token punctuation">{<!-- --></span>
                    continuation<!-- --><span class="token punctuation">.<!-- --></span><span class="token function">resumeWith<!-- --></span><span class="token punctuation">(<!-- --></span>Result<!-- --><span class="token punctuation">.<!-- --></span><span class="token function">success<!-- --></span><span class="token punctuation">(<!-- --></span>response<!-- --><span class="token punctuation">.<!-- --></span><span class="token function">body<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token punctuation">)<!-- --></span><span class="token operator">!!<!-- --></span><span class="token punctuation">)<!-- --></span><span class="token punctuation">)<!-- --></span>
                <!-- --><span class="token punctuation">}<!-- --></span> <!-- --><span class="token keyword">else<!-- --></span> <!-- --><span class="token punctuation">{<!-- --></span>
                    continuation<!-- --><span class="token punctuation">.<!-- --></span><span class="token function">resumeWithException<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token function">IOException<!-- --></span><span class="token punctuation">(<!-- --></span>response<!-- --><span class="token punctuation">.<!-- --></span><span class="token function">message<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token punctuation">)<!-- --></span><span class="token punctuation">)<!-- --></span><span class="token punctuation">)<!-- --></span>
                <!-- --><span class="token punctuation">}<!-- --></span>
            <!-- --><span class="token punctuation">}<!-- --></span>

            <!-- --><span class="token keyword">override<!-- --></span> <!-- --><span class="token keyword">fun<!-- --></span> <!-- --><span class="token function">onFailure<!-- --></span><span class="token punctuation">(<!-- --></span>call<!-- --><span class="token operator">:<!-- --></span> Call<!-- --><span class="token operator">&lt;<!-- --></span>T<!-- --><span class="token operator">&gt;<!-- --></span><span class="token punctuation">,<!-- --></span> t<!-- --><span class="token operator">:<!-- --></span> Throwable<!-- --><span class="token punctuation">)<!-- --></span> <!-- --><span class="token punctuation">{<!-- --></span>
                continuation<!-- --><span class="token punctuation">.<!-- --></span><span class="token function">resumeWithException<!-- --></span><span class="token punctuation">(<!-- --></span>t<!-- --><span class="token punctuation">)<!-- --></span>
            <!-- --><span class="token punctuation">}<!-- --></span>
        <!-- --><span class="token punctuation">}<!-- --></span><span class="token punctuation">)<!-- --></span>
    <!-- --><span class="token punctuation">}<!-- --></span>
<!-- --><span class="token punctuation">}<!-- --></span></code></pre></div>
<!-- --><p>Ok, now we’re downloading the video file. We just need to send it over to Telegram!<!-- --></p>
<!-- --><p><strong>Sending the video to Telegram<!-- --></strong></p>
<!-- --><p>This is the easiest part thanks to the amazing <!-- --><code class="language-text">kotlin-telegram-bot<!-- --></code> library.<!-- --></p>
<!-- --><div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">val<!-- --></span> telegramBot <!-- --><span class="token operator">=<!-- --></span> bot <!-- --><span class="token punctuation">{<!-- --></span> token <!-- --><span class="token operator">=<!-- --></span> authData<!-- --><span class="token punctuation">.<!-- --></span>telegramToken <!-- --><span class="token punctuation">}<!-- --></span>
telegramBot<!-- --><span class="token punctuation">.<!-- --></span><span class="token function">sendVideo<!-- --></span><span class="token punctuation">(<!-- --></span>authData<!-- --><span class="token punctuation">.<!-- --></span>telegramUserId<!-- --><span class="token punctuation">,<!-- --></span> videoFile<!-- --><span class="token punctuation">)<!-- --></span></code></pre></div>
<!-- --><p><strong>Putting it all together<!-- --></strong></p>
<!-- --><div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">fun<!-- --></span> <!-- --><span class="token function">main<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token punctuation">)<!-- --></span> <!-- --><span class="token punctuation">{<!-- --></span>
    <!-- --><span class="token keyword">val<!-- --></span> authData <!-- --><span class="token operator">=<!-- --></span> AuthLoader<!-- --><span class="token punctuation">.<!-- --></span><span class="token function">getAuthDataFrom<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token string-literal singleline"><span class="token string">&quot;auth_data.json&quot;<!-- --></span></span><span class="token punctuation">)<!-- --></span>
    <!-- --><span class="token keyword">val<!-- --></span> filterParams <!-- --><span class="token operator">=<!-- --></span> <!-- --><span class="token function">FilterParams<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token function">listOf<!-- --></span><span class="token punctuation">(<!-- --></span>authData<!-- --><span class="token punctuation">.<!-- --></span>twitterUserId<!-- --><span class="token punctuation">)<!-- --></span><span class="token punctuation">,<!-- --></span><span class="token function">listOf<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token string-literal singleline"><span class="token string">&quot;@MandaProZap&quot;<!-- --></span></span><span class="token punctuation">)<!-- --></span><span class="token punctuation">)<!-- --></span>

    <!-- --><span class="token keyword">val<!-- --></span> twitterClient <!-- --><span class="token operator">=<!-- --></span> <!-- --><span class="token function">TwitterClient<!-- --></span><span class="token punctuation">(<!-- --></span>authData<!-- --><span class="token punctuation">)<!-- --></span>
    <!-- --><span class="token keyword">val<!-- --></span> telegramBot <!-- --><span class="token operator">=<!-- --></span> bot <!-- --><span class="token punctuation">{<!-- --></span> token <!-- --><span class="token operator">=<!-- --></span> authData<!-- --><span class="token punctuation">.<!-- --></span>telegramToken <!-- --><span class="token punctuation">}<!-- --></span>

    <!-- --><span class="token function">FilteredStatusStream<!-- --></span><span class="token punctuation">(<!-- --></span>authData<!-- --><span class="token punctuation">,<!-- --></span> filterParams<!-- --><span class="token punctuation">)<!-- --></span> <!-- --><span class="token punctuation">{<!-- --></span> newStatus <!-- --><span class="token operator">-&gt;<!-- --></span>
        twitterClient<!-- --><span class="token punctuation">.<!-- --></span><span class="token function">getStatusById<!-- --></span><span class="token punctuation">(<!-- --></span>newStatus<!-- --><span class="token punctuation">.<!-- --></span>inReplyToStatusId<!-- --><span class="token punctuation">)<!-- --></span>
            <!-- --><span class="token operator">?<!-- --></span><span class="token punctuation">.<!-- --></span>mediaEntities
            <!-- --><span class="token operator">?<!-- --></span><span class="token punctuation">.<!-- --></span><span class="token function">mapNotNull<!-- --></span> <!-- --><span class="token punctuation">{<!-- --></span> it<!-- --><span class="token punctuation">.<!-- --></span>videoVariants<!-- --><span class="token punctuation">.<!-- --></span><span class="token function">firstOrNull<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token punctuation">)<!-- --></span><span class="token operator">?<!-- --></span><span class="token punctuation">.<!-- --></span>url <!-- --><span class="token punctuation">}<!-- --></span>
            <!-- --><span class="token operator">?<!-- --></span><span class="token punctuation">.<!-- --></span><span class="token function">forEach<!-- --></span> <!-- --><span class="token punctuation">{<!-- --></span> url <!-- --><span class="token operator">-&gt;<!-- --></span>
                GlobalScope<!-- --><span class="token punctuation">.<!-- --></span><span class="token function">launch<!-- --></span> <!-- --><span class="token punctuation">{<!-- --></span>
                    FileDownloader<!-- --><span class="token punctuation">.<!-- --></span><span class="token function">downloadAndWriteToFile<!-- --></span><span class="token punctuation">(<!-- --></span>url<!-- --><span class="token punctuation">)<!-- --></span><span class="token operator">?<!-- --></span><span class="token punctuation">.<!-- --></span><span class="token function">let<!-- --></span> <!-- --><span class="token punctuation">{<!-- --></span> videoFile <!-- --><span class="token operator">-&gt;<!-- --></span>
                        telegramBot<!-- --><span class="token punctuation">.<!-- --></span><span class="token function">sendVideo<!-- --></span><span class="token punctuation">(<!-- --></span>authData<!-- --><span class="token punctuation">.<!-- --></span>telegramUserId<!-- --><span class="token punctuation">,<!-- --></span> videoFile<!-- --><span class="token punctuation">)<!-- --></span>
                    <!-- --><span class="token punctuation">}<!-- --></span>
                <!-- --><span class="token punctuation">}<!-- --></span>
            <!-- --><span class="token punctuation">}<!-- --></span>
    <!-- --><span class="token punctuation">}<!-- --></span><span class="token punctuation">.<!-- --></span><span class="token function">start<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token punctuation">)<!-- --></span>
<!-- --><span class="token punctuation">}<!-- --></span></code></pre></div>
<!-- --><div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">fun<!-- --></span> <!-- --><span class="token function">main<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token punctuation">)<!-- --></span> <!-- --><span class="token punctuation">{<!-- --></span>
<!-- --><span class="token keyword">val<!-- --></span> authData <!-- --><span class="token operator">=<!-- --></span> AuthLoader<!-- --><span class="token punctuation">.<!-- --></span><span class="token function">getAuthDataFrom<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token string-literal singleline"><span class="token string">&quot;auth_data.json&quot;<!-- --></span></span><span class="token punctuation">)<!-- --></span>
<!-- --><span class="token keyword">val<!-- --></span> filterParams <!-- --><span class="token operator">=<!-- --></span> <!-- --><span class="token function">FilterParams<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token function">listOf<!-- --></span><span class="token punctuation">(<!-- --></span>authData<!-- --><span class="token punctuation">.<!-- --></span>twitterUserId<!-- --><span class="token punctuation">)<!-- --></span><span class="token punctuation">,<!-- --></span><span class="token function">listOf<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token string-literal singleline"><span class="token string">&quot;@MandaProZap&quot;<!-- --></span></span><span class="token punctuation">)<!-- --></span><span class="token punctuation">)<!-- --></span>

    <!-- --><span class="token keyword">val<!-- --></span> twitterClient <!-- --><span class="token operator">=<!-- --></span> <!-- --><span class="token function">TwitterClient<!-- --></span><span class="token punctuation">(<!-- --></span>authData<!-- --><span class="token punctuation">)<!-- --></span>
    <!-- --><span class="token keyword">val<!-- --></span> telegramBot <!-- --><span class="token operator">=<!-- --></span> bot <!-- --><span class="token punctuation">{<!-- --></span> token <!-- --><span class="token operator">=<!-- --></span> authData<!-- --><span class="token punctuation">.<!-- --></span>telegramToken <!-- --><span class="token punctuation">}<!-- --></span>

    <!-- --><span class="token function">FilteredStatusStream<!-- --></span><span class="token punctuation">(<!-- --></span>authData<!-- --><span class="token punctuation">,<!-- --></span> filterParams<!-- --><span class="token punctuation">)<!-- --></span> <!-- --><span class="token punctuation">{<!-- --></span> newStatus <!-- --><span class="token operator">-&gt;<!-- --></span>
        twitterClient<!-- --><span class="token punctuation">.<!-- --></span><span class="token function">getStatusById<!-- --></span><span class="token punctuation">(<!-- --></span>newStatus<!-- --><span class="token punctuation">.<!-- --></span>inReplyToStatusId<!-- --><span class="token punctuation">)<!-- --></span>
            <!-- --><span class="token operator">?<!-- --></span><span class="token punctuation">.<!-- --></span>mediaEntities
            <!-- --><span class="token operator">?<!-- --></span><span class="token punctuation">.<!-- --></span><span class="token function">mapNotNull<!-- --></span> <!-- --><span class="token punctuation">{<!-- --></span> it<!-- --><span class="token punctuation">.<!-- --></span>videoVariants<!-- --><span class="token punctuation">.<!-- --></span><span class="token function">firstOrNull<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token punctuation">)<!-- --></span><span class="token operator">?<!-- --></span><span class="token punctuation">.<!-- --></span>url <!-- --><span class="token punctuation">}<!-- --></span>
            <!-- --><span class="token operator">?<!-- --></span><span class="token punctuation">.<!-- --></span><span class="token function">forEach<!-- --></span> <!-- --><span class="token punctuation">{<!-- --></span> url <!-- --><span class="token operator">-&gt;<!-- --></span>
                GlobalScope<!-- --><span class="token punctuation">.<!-- --></span><span class="token function">launch<!-- --></span> <!-- --><span class="token punctuation">{<!-- --></span>
                    FileDownloader<!-- --><span class="token punctuation">.<!-- --></span><span class="token function">downloadAndWriteToFile<!-- --></span><span class="token punctuation">(<!-- --></span>url<!-- --><span class="token punctuation">)<!-- --></span><span class="token operator">?<!-- --></span><span class="token punctuation">.<!-- --></span><span class="token function">let<!-- --></span> <!-- --><span class="token punctuation">{<!-- --></span> videoFile <!-- --><span class="token operator">-&gt;<!-- --></span>
                        telegramBot<!-- --><span class="token punctuation">.<!-- --></span><span class="token function">sendVideo<!-- --></span><span class="token punctuation">(<!-- --></span>authData<!-- --><span class="token punctuation">.<!-- --></span>telegramUserId<!-- --><span class="token punctuation">,<!-- --></span> videoFile<!-- --><span class="token punctuation">)<!-- --></span>
                    <!-- --><span class="token punctuation">}<!-- --></span>
                <!-- --><span class="token punctuation">}<!-- --></span>
            <!-- --><span class="token punctuation">}<!-- --></span>
    <!-- --><span class="token punctuation">}<!-- --></span><span class="token punctuation">.<!-- --></span><span class="token function">start<!-- --></span><span class="token punctuation">(<!-- --></span><span class="token punctuation">)<!-- --></span>
<!-- --><span class="token punctuation">}<!-- --></span></code></pre></div>
<!-- --><h3>Summing it all up!<!-- --></h3>
<!-- --><p>Yes, we can create a twitter-telegram bot with Kotlin while keeping it fairly simple.<!-- --></p>
<!-- --><p>Taking advantage of these libraries make the experience a lot smoother and adding some wrappers on top of it helps to hide the complexity and enable us to create a declarative API to let us focus on what matters.<!-- --></p>
<!-- --><p>The next step here is to implement this idea using the <!-- --><code class="language-text">WebHook API<!-- --></code>, but this will have to be in a another post.<!-- --></p>
<!-- --><p>I hope you learned something along the way, I certainly did!<!-- --></p>
<!-- --><p>You can check the project on <!-- --><a href="https://github.com/iurysza/twitter-telegram-bot">github<!-- --></a>.<!-- --></p></div></section></article><span class="disqus-comment-count" data-disqus-identifier="A Twitter-Telegram bot in Kotlin" data-disqus-url="https://iurysza.github.io/thoughtbox/writing_a_twitter_bot_with_kotlin/">...</span><div id="disqus_thread"></div></div></main><style data-emotion="css dcfhc9">.css-dcfhc9{position:relative;padding:0 5vw;}</style><style data-emotion="css 1aa7tg3">.css-1aa7tg3{border-bottom:1px solid rgba(255, 255, 255, 0.1);background:#0a0b0c;position:relative;padding:0 5vw;}.css-1aa7tg3 .post-card{padding-bottom:0;border-bottom:none;}.css-1aa7tg3 .post-card:after{display:none;}.css-1aa7tg3 .post-card-primary-tag{color:#fff;opacity:0.6;}.css-1aa7tg3 .post-card-title{color:#fff;opacity:0.8;-webkit-transition:all 0.2s ease-in-out;transition:all 0.2s ease-in-out;}.css-1aa7tg3 .post-card:hover .post-card-image{opacity:1;}.css-1aa7tg3 .post-card-excerpt{color:rgba(255, 255, 255, 0.6);}.css-1aa7tg3 .static-avatar{border-color:#000;}.css-1aa7tg3 .post-card-byline-content{color:rgba(255, 255, 255, 0.6);}.css-1aa7tg3 .post-card-byline-content a{color:rgba(255, 255, 255, 0.8);}.css-1aa7tg3 .author-avatar{border-color:#0a0b0c;}.css-1aa7tg3 .author-profile-image{background:#0a0b0c;}@media (max-width: 650px){.css-1aa7tg3 .post-card{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;margin:25px;padding:25px 0 0;border-bottom:1px solid rgba(255, 255, 255, 0.1);}}</style><aside class="read-next css-1aa7tg3 eu5ixib1"><div class="css-y521qa"><style data-emotion="css 1ehfk3g">.css-1ehfk3g{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin:0 -25px;padding:60px 0 0 0;}</style><div class="read-next-feed css-1ehfk3g eu5ixib0"><style data-emotion="css 1gm6nmw">.css-1gm6nmw{position:relative;-webkit-flex:0 1 326px;-ms-flex:0 1 326px;flex:0 1 326px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;overflow:hidden;margin:0 25px 50px;padding:25px;background:linear-gradient(
    #1a1c20,
    #0a0b0c
  );border-radius:3px;}.css-1gm6nmw a{-webkit-transition:all 0.2s ease-in-out;transition:all 0.2s ease-in-out;}.css-1gm6nmw a:hover{-webkit-text-decoration:none;text-decoration:none;}@media (max-width: 1170px){.css-1gm6nmw{-webkit-flex:1 1 261px;-ms-flex:1 1 261px;flex:1 1 261px;margin-bottom:5vw;}}@media (max-width: 650px){.css-1gm6nmw{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;margin:0 25px;padding:0;background:none;}}</style><article class="read-next-card css-1gm6nmw em2u7rs4"><header class="read-next-card-header"><style data-emotion="css 1wo4mzo">.css-1wo4mzo{margin:0;color:rgba(255, 255, 255, 0.6);font-size:1.2rem;line-height:1em;font-weight:300;letter-spacing:0.4px;text-transform:uppercase;}.css-1wo4mzo a{color:#fff;font-weight:500;-webkit-text-decoration:none;text-decoration:none;opacity:0.8;}.css-1wo4mzo a:hover{opacity:1;}</style><h3 class="css-1wo4mzo em2u7rs3"><span>More in</span> <!-- --><a href="/tags/kotlin/">kotlin</a></h3></header><style data-emotion="css ejekmm">.css-ejekmm{font-size:1.7rem;}.css-ejekmm ul{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin:0;padding:0;list-style:none;}.css-ejekmm li{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;margin:0;padding:20px 0;border-bottom:rgba(255, 255, 255, 0.1);}.css-ejekmm li:last-of-type{padding-bottom:5px;border:none;}.css-ejekmm h4{margin:0;font-size:1.6rem;line-height:1.35em;font-weight:600;}.css-ejekmm li a{display:block;color:#fff;opacity:0.8;}.css-ejekmm li a:hover{opacity:1;}</style><div class="read-next-card-content css-ejekmm em2u7rs2"><ul><li><h4><a href="/react-native-nested-views/">Nesting React Components in Native UI</a></h4><style data-emotion="css f7c4dv">.css-f7c4dv{margin-top:2px;font-size:1.2rem;line-height:1.4em;font-weight:400;}.css-f7c4dv p{margin:0;color:rgba(255, 255, 255, 0.6);}</style><div class="read-next-card-meta css-f7c4dv em2u7rs1"><p><time dateTime="2022-07-05">05 Jul 2022</time> - <!-- --> min read<!-- --></p></div></li><li><h4><a href="/kotlin-multiplatform-under-the-surface/">Kotlin Multiplatform under the surface</a></h4><div class="read-next-card-meta css-f7c4dv em2u7rs1"><p><time dateTime="2021-08-18">18 Aug 2021</time> - <!-- --> min read<!-- --></p></div></li><li><h4><a href="/continuous-integration-approach-for-kotlin/">A Continuous Integration approach for Kotlin projects</a></h4><div class="read-next-card-meta css-f7c4dv em2u7rs1"><p><time dateTime="2021-01-24">24 Jan 2021</time> - <!-- --> min read<!-- --></p></div></li></ul></div><style data-emotion="css qqvtec">.css-qqvtec{position:relative;margin:40px 0 5px;}.css-qqvtec a{padding:7px 12px 8px 14px;border:1px solid rgba(255, 255, 255, 0.6);color:rgba(255, 255, 255, 0.6);font-size:1.3rem;border-radius:999px;-webkit-transition:all 0.35s ease-in-out;transition:all 0.35s ease-in-out;}.css-qqvtec a:hover{border-color:#fecd35;color:#fecd35;-webkit-text-decoration:none;text-decoration:none;}</style><footer class="read-next-card-footer css-qqvtec em2u7rs0"><a href="/tags/kotlin/">See all 7 posts<!-- --> →<!-- --></a></footer></article><style data-emotion="css 1aiulzc">.css-1aiulzc{position:relative;-webkit-flex:1 1 301px;-ms-flex:1 1 301px;flex:1 1 301px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;overflow:hidden;margin:0 0 40px;padding:0 20px 40px;min-height:220px;-webkit-background-size:cover;background-size:cover;}</style><article class="post-card   css-1aiulzc"><style data-emotion="css c0hj8a">.css-c0hj8a{position:relative;display:block;overflow:hidden;border-radius:5px 5px 0 0;}</style><a class="post-card-image-link css-c0hj8a" href="/setting-up-mockserver/"><style data-emotion="css wa09yz">.css-wa09yz{width:auto;height:200px;background:#c5d2d9 no-repeat center center;-webkit-background-size:cover;background-size:cover;}@media (prefers-color-scheme: dark){.css-wa09yz{background:#191b1f;}}</style><div class="post-card-image css-wa09yz e1qfhan17"><div data-gatsby-image-wrapper="" style="height:100%" class="gatsby-image-wrapper"><div aria-hidden="true" style="padding-top:63.6904761904762%"></div><img aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear" decoding="async" src="data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAgJBv/EABYBAQEBAAAAAAAAAAAAAAAAAAUEBv/aAAwDAQACEAMQAAABwLFRGZgaijRCA1wH/8QAHBAAAQUBAQEAAAAAAAAAAAAAAgEDBAUGBwgV/9oACAEBAAEFAmNXhq5InVuf16RvQGLFv6kpDuLsQoXCQi//xAAgEQACAgICAgMAAAAAAAAAAAABAgMEBRIAESEiQVFi/9oACAEDAQE/AZ5KmTs5i8MdiK0xeKwC9Ww/RA1VIjHP6M+ux2jMO/kqpPfEvRxqqHFYmQqADJJXm3f9NpZROz86qo+hz//EACERAAICAgIBBQAAAAAAAAAAAAECAwQFEgARIgYTQUJR/9oACAECAQE/ARibNAYmquRzNlHM0LKt6AKN29x5HSxC20aFugElE2vipYDrjemzIS4y+ZjDeWkdmsEXv6oHqO2o+NmY/pPP/8QAJBAAAgICAgIBBQEAAAAAAAAAAgMBBBESBRMAIzIUISIxUWH/2gAIAQEABj8C45LuDqNsqDFkqbThh5L4itdKfYmIwfsmC+W5TnCyVwdttjqYaVa9FeTlckuWGxYshJlge4e2B/KRgpj745bja67cF8eMOzZrdeI19rwApZnbbEa41xOc+QUGQkOmCWXWcTGZidxwUTH9iY8Cu7jKduy6Oz62yy4R1rTEJszZoqGwCq0tW9irKvYh7ZGz1rMAEc6CP+R+vP/EABoQAQEAAwEBAAAAAAAAAAAAAAERACExQVH/2gAIAQEAAT8h0uchXTkafUq46sJGsN5heOB4ePQTrvarYYilQVFQwxBOq0h9uD8XcOv5mww5uWGwKJt7CavXqtVVXP/aAAwDAQACAAMAAAAQcx//xAAYEQEBAQEBAAAAAAAAAAAAAAABESExQf/aAAgBAwEBPxB6KPUGZTQ9JAVpuSMBfWJ1rgSf/8QAFxEBAQEBAAAAAAAAAAAAAAAAEQEAIf/aAAgBAgEBPxCRHJIwpsXCmBTUrIlsUCgQKq7v/8QAFxABAQEBAAAAAAAAAAAAAAAAAREAIf/aAAgBAQABPxBCFE3kFOySBMkxgmO8H8UQB4wROAJwuNNq1KcZmDNROhMjFuyHpD56b+3LwnQJbBR6EzRHRRXR/9k=" alt=""/><picture><source type="image/webp" data-srcset="/static/4d554af8924204367abb39565da8561d/798a7/mock-server.webp 750w,/static/4d554af8924204367abb39565da8561d/b846a/mock-server.webp 1080w,/static/4d554af8924204367abb39565da8561d/5e847/mock-server.webp 1366w,/static/4d554af8924204367abb39565da8561d/e5f4c/mock-server.webp 1680w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="100vw" decoding="async" loading="lazy" data-src="/static/4d554af8924204367abb39565da8561d/11eed/mock-server.jpg" data-srcset="/static/4d554af8924204367abb39565da8561d/cc144/mock-server.jpg 750w,/static/4d554af8924204367abb39565da8561d/224fc/mock-server.jpg 1080w,/static/4d554af8924204367abb39565da8561d/0c9ed/mock-server.jpg 1366w,/static/4d554af8924204367abb39565da8561d/11eed/mock-server.jpg 1680w" alt="Setting up MockServer cover image"/></picture><noscript><picture><source type="image/webp" srcSet="/static/4d554af8924204367abb39565da8561d/798a7/mock-server.webp 750w,/static/4d554af8924204367abb39565da8561d/b846a/mock-server.webp 1080w,/static/4d554af8924204367abb39565da8561d/5e847/mock-server.webp 1366w,/static/4d554af8924204367abb39565da8561d/e5f4c/mock-server.webp 1680w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="100vw" decoding="async" loading="lazy" src="/static/4d554af8924204367abb39565da8561d/11eed/mock-server.jpg" srcSet="/static/4d554af8924204367abb39565da8561d/cc144/mock-server.jpg 750w,/static/4d554af8924204367abb39565da8561d/224fc/mock-server.jpg 1080w,/static/4d554af8924204367abb39565da8561d/0c9ed/mock-server.jpg 1366w,/static/4d554af8924204367abb39565da8561d/11eed/mock-server.jpg 1680w" alt="Setting up MockServer cover image"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div></div></a><style data-emotion="css 1lh7kdz">.css-1lh7kdz{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}</style><div class="post-card-content css-1lh7kdz e1qfhan16"><style data-emotion="css 1fjrpmt">.css-1fjrpmt{position:relative;display:block;color:#15171A;}.css-1fjrpmt:hover{-webkit-text-decoration:none;text-decoration:none;}</style><a class="post-card-content-link css-1fjrpmt" href="/setting-up-mockserver/"><style data-emotion="css 1w0j2bn">.css-1w0j2bn{margin:15px 0 0;}</style><header class="post-card-header css-1w0j2bn e1qfhan10"><style data-emotion="css oghrx5">.css-oghrx5{margin:0 0 0.2em;color:#3eb0ef;font-size:1.2rem;font-weight:500;letter-spacing:0.2px;text-transform:uppercase;}</style><div class="post-card-primary-tag css-oghrx5 e1qfhan15"><a href="/tags/docker/">docker</a>,  <!-- --><a href="/tags/automation/">automation</a>,  <!-- --><a href="/tags/testing/">testing</a></div><style data-emotion="css 3lgx4i">.css-3lgx4i{margin:0 0 0.4em;line-height:1.15em;-webkit-transition:color 0.2s ease-in-out;transition:color 0.2s ease-in-out;}@media (prefers-color-scheme: dark){.css-3lgx4i{color:rgba(255, 255, 255, 0.85);}}</style><h2 class="post-card-title css-3lgx4i e1qfhan14">Setting up MockServer</h2></header><style data-emotion="css 10mgfrl">.css-10mgfrl{font-family:Georgia,serif;}@media (prefers-color-scheme: dark){.css-10mgfrl{color:#90a2aa!important;}}</style><section class="post-card-excerpt css-10mgfrl e1qfhan13"><p>Using MockServer to test in isolation.</p></section></a><style data-emotion="css 143c7df">.css-143c7df{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;padding:0;}</style><footer class="post-card-meta css-143c7df e1qfhan12"><style data-emotion="css oek1k3">.css-oek1k3{-webkit-flex:1 1 50%;-ms-flex:1 1 50%;flex:1 1 50%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin:4px 0 0 4px;color:#90a2aa;font-size:1.2rem;line-height:1.4em;font-weight:400;letter-spacing:0.2px;text-transform:uppercase;}.css-oek1k3 span{margin:0;}.css-oek1k3 a{color:#434952;font-weight:600;}@media (prefers-color-scheme: dark){.css-oek1k3 a{color:rgba(255, 255, 255, 0.75);}}</style><div class="post-card-byline-content css-oek1k3 e1qfhan11"><span class="post-card-byline-date"><time dateTime="2020-04-21">21 Apr 2020</time> <!-- --><span class="bull">•</span> <!-- -->3 min read<!-- --></span></div></footer></div></article><article class="post-card   css-1aiulzc"><a class="post-card-image-link css-c0hj8a" href="/kotlin-scripting/"><div class="post-card-image css-wa09yz e1qfhan17"><div data-gatsby-image-wrapper="" style="height:100%" class="gatsby-image-wrapper"><div aria-hidden="true" style="padding-top:63.489583333333336%"></div><img aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear" decoding="async" src="data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAUGBwn/xAAWAQEBAQAAAAAAAAAAAAAAAAAFAgT/2gAMAwEAAhADEAAAAeQDjIXtYpUqw9P/xAAaEAEAAgMBAAAAAAAAAAAAAAADBAUBEhMC/9oACAEBAAEFAqWTK2sLGx6t0Za3LLLaGETyCbH/AP/EAB8RAAEEAgIDAAAAAAAAAAAAAAECERIhAzEAUSJBkf/aAAgBAwEBPwGMc6gyUziQUh8i+5EgCtJ8zXpNO2IUzNTOa10CPh5//8QAHxEAAgEEAgMAAAAAAAAAAAAAAQIRAAMSIRRBIjGB/9oACAECAQE/AbjIbdsmGIJXG6mSBiRiE8u/baUSO65BGoiNRA1H2v/EACYQAAICAgECBQUAAAAAAAAAAAECAxEEEgATIQUiUWGBMTNBUpL/2gAIAQEABj8ClXFycvGOzFzh4gndlCgqGaTIgjUKfoNgV2LHYUAUky/FZrQKzz4fh0RJF+XcyZCFQO+3V2uwePI52dmNmlF/CAJ/Ir05HjRS9FshgplKCXUVf22IF3+bHJJcjq5jLLIi3IYV8hqyAHc36B1r34CkOKi/q0HVPbtZd2sk/A9uf//EABoQAQEBAQEBAQAAAAAAAAAAAAERIQBRMXH/2gAIAQEAAT8hAjTm0J8kS5acXrFgLFiAopiMq0ekdSssVgfL8uIATzhGIhTqjOkazZmV0LQ+Jjq/6gH3HzKw8Bt//9oADAMBAAIAAwAAABBz7//EABgRAQEBAQEAAAAAAAAAAAAAAAEhETEA/9oACAEDAQE/EExcIlQRWLdEsMB5C+BIYxmGZYhI8z//xAAWEQEBAQAAAAAAAAAAAAAAAAABESH/2gAIAQIBAT8QY+oxlQNslxhraK1quEBABAYEhhgZb//EABgQAQEBAQEAAAAAAAAAAAAAAAERACEx/9oACAEBAAE/EGACQNRinAR3Of8AbOS3dAhIgwDLDmUEkQNdFFCmisGEjTJGhuHZAcVKIWKasN570v4mqoEFAn1Vn//Z" alt=""/><picture><source type="image/webp" data-srcset="/static/b423f69cc2c1e9cb4c89534b3e553e35/be8a2/kotlin-scripting.webp 750w,/static/b423f69cc2c1e9cb4c89534b3e553e35/acc80/kotlin-scripting.webp 1080w,/static/b423f69cc2c1e9cb4c89534b3e553e35/6adbd/kotlin-scripting.webp 1366w,/static/b423f69cc2c1e9cb4c89534b3e553e35/5bc6d/kotlin-scripting.webp 1920w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="100vw" decoding="async" loading="lazy" data-src="/static/b423f69cc2c1e9cb4c89534b3e553e35/74e6c/kotlin-scripting.jpg" data-srcset="/static/b423f69cc2c1e9cb4c89534b3e553e35/bd349/kotlin-scripting.jpg 750w,/static/b423f69cc2c1e9cb4c89534b3e553e35/5d6a3/kotlin-scripting.jpg 1080w,/static/b423f69cc2c1e9cb4c89534b3e553e35/2deed/kotlin-scripting.jpg 1366w,/static/b423f69cc2c1e9cb4c89534b3e553e35/74e6c/kotlin-scripting.jpg 1920w" alt="Type safe scripts cover image"/></picture><noscript><picture><source type="image/webp" srcSet="/static/b423f69cc2c1e9cb4c89534b3e553e35/be8a2/kotlin-scripting.webp 750w,/static/b423f69cc2c1e9cb4c89534b3e553e35/acc80/kotlin-scripting.webp 1080w,/static/b423f69cc2c1e9cb4c89534b3e553e35/6adbd/kotlin-scripting.webp 1366w,/static/b423f69cc2c1e9cb4c89534b3e553e35/5bc6d/kotlin-scripting.webp 1920w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="100vw" decoding="async" loading="lazy" src="/static/b423f69cc2c1e9cb4c89534b3e553e35/74e6c/kotlin-scripting.jpg" srcSet="/static/b423f69cc2c1e9cb4c89534b3e553e35/bd349/kotlin-scripting.jpg 750w,/static/b423f69cc2c1e9cb4c89534b3e553e35/5d6a3/kotlin-scripting.jpg 1080w,/static/b423f69cc2c1e9cb4c89534b3e553e35/2deed/kotlin-scripting.jpg 1366w,/static/b423f69cc2c1e9cb4c89534b3e553e35/74e6c/kotlin-scripting.jpg 1920w" alt="Type safe scripts cover image"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div></div></a><div class="post-card-content css-1lh7kdz e1qfhan16"><a class="post-card-content-link css-1fjrpmt" href="/kotlin-scripting/"><header class="post-card-header css-1w0j2bn e1qfhan10"><div class="post-card-primary-tag css-oghrx5 e1qfhan15"><a href="/tags/kotlin/">kotlin</a>,  <!-- --><a href="/tags/automation/">automation</a></div><h2 class="post-card-title css-3lgx4i e1qfhan14">Type safe scripts</h2></header><section class="post-card-excerpt css-10mgfrl e1qfhan13"><p>Ever had a hard time trying to make sense of a bash script? What if you could replace that with kotlin?</p></section></a><footer class="post-card-meta css-143c7df e1qfhan12"><div class="post-card-byline-content css-oek1k3 e1qfhan11"><span class="post-card-byline-date"><time dateTime="2020-07-26">26 Jul 2020</time> <!-- --><span class="bull">•</span> <!-- -->2 min read<!-- --></span></div></footer></div></article></div></div></aside><style data-emotion="css 1turcvg">.css-1turcvg{position:relative;padding:0 5vw;position:relative;padding-top:20px;padding-bottom:60px;color:#fff;background:#000;}</style><footer class="css-1turcvg"><style data-emotion="css 1d3gyi8">.css-1d3gyi8{margin:0 auto;max-width:1040px;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(255, 255, 255, 0.7);font-size:1.3rem;}.css-1d3gyi8 a{color:rgba(255, 255, 255, 0.7);}.css-1d3gyi8 a:hover{color:rgba(255, 255, 255, 1);-webkit-text-decoration:none;text-decoration:none;}@media (max-width: 650px){.css-1d3gyi8{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}</style><div class="css-1d3gyi8"><section class="copyright"><a href="/">Thought Box</a> © <!-- -->2022<!-- --> <!-- --><a href="/">| <!-- -->Thought Box<!-- --> <!-- -->is based on Gatsby Casper<!-- --></a></section><style data-emotion="css pwtbz1">.css-pwtbz1{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}.css-pwtbz1 a{position:relative;margin-left:20px;}.css-pwtbz1 a:before{content:'';position:absolute;top:11px;left:-11px;display:block;width:2px;height:2px;background:#fff;border-radius:100%;}.css-pwtbz1 a:first-of-type:before{display:none;}@media (max-width: 650px){.css-pwtbz1 a:first-of-type{margin-left:0;}}</style><nav class="css-pwtbz1 e1me3zb40"><a href="/">Latest Posts</a><a href="https://www.linkedin.com/in/iurysouza/" target="_blank" rel="noopener noreferrer">LinkedIn</a><a href="https://twitter.com/iurysza" target="_blank" rel="noopener noreferrer">Twitter</a><a href="https://github.com/scttcper/gatsby-casper" target="_blank" rel="noopener noreferrer">Casper</a><a href="/rss.xml">RSS</a></nav></div></footer></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/writing_a_twitter_bot_with_kotlin/";window.___webpackCompilationHash="3fc2ed0498849e2a7c66";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-a2a4fef2f285a0106e51.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-af130cbe8db6dcc567c4.js"],"component---src-pages-about-tsx":["/component---src-pages-about-tsx-7237caf47c9529e432ed.js"],"component---src-pages-speaking-tsx":["/component---src-pages-speaking-tsx-8f03ae509749b256c3d2.js"],"component---src-templates-author-tsx":[],"component---src-templates-index-tsx":["/component---src-templates-index-tsx-51d279cba4d3418b6551.js"],"component---src-templates-post-tsx":[],"component---src-templates-tags-tsx":["/component---src-templates-tags-tsx-ab1ea8e5d6b80852990a.js"]};/*]]>*/</script><script src="/app-a2a4fef2f285a0106e51.js" async=""></script><script src="/framework-af7f1fac75250edef106.js" async=""></script><script src="/webpack-runtime-9e7710bd14753a156a51.js" async=""></script></body></html>